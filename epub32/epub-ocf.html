<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 24.21.1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>/* --- EXAMPLES --- */
span.example-title {
    text-transform: none;
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example span.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
.issue-label {
    text-transform: initial;
}

.warning > p:first-child { margin-top: 0 }
.warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
span.warning { padding: .1em .5em .15em; }

.issue.closed span.issue-number {
    text-decoration: line-through;
}

.warning {
    border-color: #f11;
    border-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}

li.task-list-item {
    list-style: none;
}

input.task-list-item-checkbox {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
}

.issue a.respec-gh-label {
  padding: 5px;
  margin: 0 2px 0 2px;
  font-size: 10px;
  text-transform: none;
  text-decoration: none;
  font-weight: bold;
  border-radius: 4px;
  position: relative;
  bottom: 2px;
  border: none;
}

.issue a.respec-label-dark {
  color: #fff;
  background-color: #000;
}

.issue a.respec-label-light {
  color: #000;
  background-color: #fff;
}
</style>
		
<title>EPUB Open Container Format (OCF) 3.2 日本語訳</title>
<style id="respec-mainstyle">/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

@keyframes pop {
  0% {
    transform: scale(1, 1);
  }
  25% {
    transform: scale(1.25, 1.25);
    opacity: 0.75;
  }
  100% {
    transform: scale(1, 1);
  }
}

/* Override code highlighter background */
.hljs {
  background: transparent !important;
}

/* --- INLINES --- */
h1 abbr,
h2 abbr,
h3 abbr,
h4 abbr,
h5 abbr,
h6 abbr,
a abbr {
  border: none;
}

dfn {
  font-weight: bold;
}

a.internalDFN {
  color: inherit;
  border-bottom: 1px solid #99c;
  text-decoration: none;
}

a.externalDFN {
  color: inherit;
  border-bottom: 1px dotted #ccc;
  text-decoration: none;
}

a.bibref {
  text-decoration: none;
}

.respec-offending-element:target {
  animation: pop 0.25s ease-in-out 0s 1;
}

/* TODO: Remove once https://github.com/w3c/tr-design/pull/176 is merged. */
.respec-offending-element a[href] {
  margin: 0;
}

.respec-offending-element {
  display: inline-block;
  position: relative;
  /* Red squiggly line */
  background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=)
    bottom repeat-x;
}
@supports (text-decoration-style: wavy) {
  .respec-offending-element {
    background: none;
    text-decoration-line: underline;
    text-decoration-style: wavy;
    text-decoration-color: red;
  }
}

#references :target {
  background: #eaf3ff;
  animation: pop 0.4s ease-in-out 0s 1;
}

cite .bibref {
  font-style: normal;
}

code {
  color: #c83500;
}

th code {
  color: inherit;
}

a[href].orcid {
    padding-left: 4px;
    padding-right: 4px;
}

a[href].orcid > svg {
    margin-bottom: -2px;
}

/* --- TOC --- */

.toc a,
.tof a {
  text-decoration: none;
}

a .secno,
a .figno {
  color: #000;
}

ul.tof,
ol.tof {
  list-style: none outside none;
}

.caption {
  margin-top: 0.5em;
  font-style: italic;
}

/* --- TABLE --- */

table.simple {
  border-spacing: 0;
  border-collapse: collapse;
  border-bottom: 3px solid #005a9c;
}

.simple th {
  background: #005a9c;
  color: #fff;
  padding: 3px 5px;
  text-align: left;
}

.simple th[scope="row"] {
  background: inherit;
  color: inherit;
  border-top: 1px solid #ddd;
}

.simple td {
  padding: 3px 10px;
  border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
  background: #f0f6ff;
}

/* --- DL --- */

.section dd > p:first-child {
  margin-top: 0;
}

.section dd > p:last-child {
  margin-bottom: 0;
}

.section dd {
  margin-bottom: 1em;
}

.section dl.attrs dd,
.section dl.eldef dd {
  margin-bottom: 0;
}

#issue-summary > ul,
.respec-dfn-list {
  column-count: 2;
}

#issue-summary li,
.respec-dfn-list li {
  list-style: none;
}

details.respec-tests-details {
  margin-left: 1em;
  display: inline-block;
  vertical-align: top;
}

details.respec-tests-details > * {
  padding-right: 2em;
}

details.respec-tests-details[open] {
  z-index: 999999;
  position: absolute;
  border: thin solid #cad3e2;
  border-radius: 0.3em;
  background-color: white;
  padding-bottom: 0.5em;
}

details.respec-tests-details[open] > summary {
  border-bottom: thin solid #cad3e2;
  padding-left: 1em;
  margin-bottom: 1em;
  line-height: 2em;
}

details.respec-tests-details > ul {
  width: 100%;
  margin-top: -0.3em;
}

details.respec-tests-details > li {
  padding-left: 1em;
}

a[href].self-link:hover {
  opacity: 1;
  text-decoration: none;
  background-color: transparent;
}

h2,
h3,
h4,
h5,
h6 {
  position: relative;
}

aside.example .marker > a.self-link {
  color: inherit;
}

h2 > a.self-link,
h3 > a.self-link,
h4 > a.self-link,
h5 > a.self-link,
h6 > a.self-link {
  border: none;
  color: inherit;
  font-size: 83%;
  height: 2em;
  left: -1.6em;
  opacity: 0.5;
  position: absolute;
  text-align: center;
  text-decoration: none;
  top: 0;
  transition: opacity 0.2s;
  width: 2em;
}

h2 > a.self-link::before,
h3 > a.self-link::before,
h4 > a.self-link::before,
h5 > a.self-link::before,
h6 > a.self-link::before {
  content: "§";
  display: block;
}

@media (max-width: 767px) {
  dd {
    margin-left: 0;
  }

  /* Don't position self-link in headings off-screen */
  h2 > a.self-link,
  h3 > a.self-link,
  h4 > a.self-link,
  h5 > a.self-link,
  h6 > a.self-link {
    left: auto;
    top: auto;
  }
}

@media print {
  .removeOnSave {
    display: none;
  }
}
</style>
		
		
		
		
<link href="common/css/common.css" rel="stylesheet" type="text/css">
		
<link rel="canonical" href="https://www.w3.org/publishing/epub3/epub-ocf.html"><style>/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080;
}

.hljs-string,
.hljs-doctag {
  color: #d14;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold;
}

.hljs-subst {
  font-weight: normal;
}

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal;
}

.hljs-regexp,
.hljs-link {
  color: #009926;
}

.hljs-symbol,
.hljs-bullet {
  color: #990073;
}

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3;
}

.hljs-meta {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style><style>var {
  position: relative;
  cursor: pointer;
  display: inline-block;
}

var[data-type]::before,
var[data-type]::after {
  position: absolute;
  left: 50%;
  top: -6px;
  opacity: 0;
  transition: opacity 0.4s;
  pointer-events: none;
}

/* the triangle or arrow or caret or whatever */
var[data-type]::before {
  content: "";
  transform: translateX(-50%);
  border-width: 4px 6px 0 6px;
  border-style: solid;
  border-color: transparent;
  border-top-color: #000;
}

/* actual text */
var[data-type]::after {
  content: attr(data-type);
  transform: translateX(-50%) translateY(-100%);
  background: #000;
  text-align: center;
  /* additional styling */
  font-family: "Dank Mono", "Fira Code", monospace;
  font-style: normal;
  padding: 6px;
  border-radius: 3px;
  color: #daca88;
}

var[data-type]:hover::after,
var[data-type]:hover::before {
  opacity: 1;
}
</style><script id="initialUserConfig" type="application/json">{
  "wg": "EPUB 3 Community Group",
  "wgURI": "https://www.w3.org/community/epub3/",
  "wgPublicList": "public-epub3",
  "specStatus": "CG-FINAL",
  "noRecTrack": true,
  "shortName": "epub-ocf",
  "prevRecURI": "https://www.idpf.org/epub/31/spec/epub-ocf-20170105.html",
  "edDraftURI": "https://w3c.github.io/publ-epub-revision/epub32/spec/epub-ocf.html",
  "copyrightStart": "1999",
  "editors": [
    {
      "name": "Garth Conboy",
      "company": "Google",
      "companyURL": "https://www.google.com"
    }
  ],
  "formerEditors": [
    {
      "name": "James Pritchett",
      "company": "Learning Ally",
      "companyURL": "https://www.learningally.org/"
    },
    {
      "name": "Markus Gylling",
      "company": "International Digital Publishing Forum (IDPF)",
      "companyURL": "https://www.idpf.org"
    }
  ],
  "processVersion": 2017,
  "includePermalinks": true,
  "permalinkEdge": true,
  "permalinkHide": false,
  "diffTool": "http://www.aptest.com/standards/htmldiff/htmldiff.pl",
  "github": {
    "repoURL": "https://github.com/w3c/publ-epub-revision",
    "branch": "master"
  },
  "localBiblio": {
    "A11YTestSuite": {
      "title": "EPUB Accessibility Tests",
      "href": "https://github.com/daisy/epub-accessibility-tests"
    },
    "AccessibilityFAQ": {
      "title": "EPUB Accessibility Frequently Asked Questions",
      "href": "http://www.idpf.org/epub/guides/a11y-faq"
    },
    "AccessibilityVocab": {
      "title": "EPUB Accessibility Vocabulary",
      "href": "http://www.idpf.org/epub/vocab/package/a11y"
    },
    "AltStyleTags": {
      "title": "Alternate Style Tags",
      "href": "http://www.idpf.org/epub/altss-tags/",
      "authors": [
        "Elika J. Etemad"
      ]
    },
    "AttributeExtensions": {
      "title": "EPUB Custom Attribute Extensions for Content Documents",
      "href": "http://www.idpf.org/epub/extensions/attributes"
    },
    "AuthorityRegistry": {
      "title": "EPUB Subject Authorities Registry",
      "href": "https://www.idpf.org/epub/registries/authorities/"
    },
    "CollectionPackageDoc": {
      "title": "Using collection Elements as Embedded Package Documents",
      "href": "http://www.idpf.org/epub/guides/collection-as-package"
    },
    "ContentDocs": {
      "title": "EPUB Content Documents 3",
      "href": "http://www.idpf.org/epub3/latest/contentdocs"
    },
    "ContentDocs32": {
      "title": "EPUB Content Documents 3.2",
      "href": "epub-contentdocs.html"
    },
    "ContentDocs31": {
      "title": "EPUB Content Documents 3.1",
      "href": "http://www.idpf.org/epub/31/spec/epub-contentdocs.html"
    },
    "ContentDocs301": {
      "title": "EPUB Content Documents 3.0.1",
      "href": "http://www.idpf.org/epub/301/spec/epub-contentdocs.html"
    },
    "ContentDocs30": {
      "title": "EPUB Content Documents 3.0",
      "href": "http://www.idpf.org/epub/30/spec/epub30-contentdocs.html"
    },
    "ContentDocsPrefixes": {
      "title": "EPUB Content Documents Reserved Prefixes",
      "href": "http://www.idpf.org/epub/vocab/structure/pfx"
    },
    "CSSSnapshot": {
      "title": "CSS Snapshot",
      "href": "https://www.w3.org/TR/CSS/",
      "id": "csssnapshot"
    },
    "CSS2": {
      "title": "CSS 2",
      "href": "https://www.w3.org/TR/CSS2/",
      "status": "W3C Recommendation",
      "publisher": "W3C"
    },
    "CSS-Text-3-20160119": {
      "title": "CSS Text Level 3 (20160119)",
      "href": "https://drafts.csswg.org/date/2016-01-19T17:23:23/css-text/",
      "authors": [
        "Elika J. Etemad"
      ],
      "etAl": true
    },
    "DAISYAudio": {
      "title": "Navigable audio-only EPUB 3 Guidelines",
      "href": "http://www.daisy.org/guidelines/epub/navigable-audio-only-epub3-guidelines"
    },
    "Dictionaries": {
      "title": "EPUB Dictionaries and Glossaries",
      "href": "http://www.idpf.org/epub/dict"
    },
    "DistributableObjects": {
      "title": "EPUB Distributable Objects 1.0",
      "href": "http://www.idpf.org/epub/do"
    },
    "EPUB-CFI": {
      "title": "EPUB Canonical Fragment Identifier (epubcfi) Specification",
      "href": "http://www.idpf.org/epub/linking/cfi/epub-cfi.html"
    },
    "EPUB32": {
      "title": "EPUB 3.2",
      "href": "epub-spec.html",
      "id": "epub32"
    },
    "EPUB31": {
      "title": "EPUB 3.1",
      "href": "http://www.idpf.org/epub/31/spec/epub-spec.html"
    },
    "EPUB3": {
      "title": "EPUB 3",
      "href": "http://www.idpf.org/epub/latest"
    },
    "EPUB32Changes": {
      "title": "EPUB 3.2 Changes",
      "href": "epub-changes.html",
      "id": "epub32changes"
    },
    "EPUB31Changes": {
      "title": "EPUB 3.1 Changes from 3.0.1",
      "href": "http://www.idpf.org/epub/31/spec/epub-changes.html"
    },
    "EPUB301Changes": {
      "title": "EPUB 3.0.1 Changes from 3.0",
      "href": "http://www.idpf.org/epub/301/spec/epub-changes.html"
    },
    "EPUB3Changes": {
      "title": "EPUB 3 Changes from 2.0.1",
      "href": "http://www.idpf.org/epub/30/spec/epub30-changes.html"
    },
    "EPUB3Overview": {
      "title": "EPUB 3 Overview",
      "href": "epub-overview.html"
    },
    "EPUBAccessibility": {
      "title": "EPUB Accessibility",
      "href": "http://www.idpf.org/epub/latest/accessibility"
    },
    "EPUBAccessibilityTechniques": {
      "title": "EPUB Accessibility Techniques",
      "href": "http://www.idpf.org/epub/latest/accessibility/techniques"
    },
    "H264": {
      "title": "H.264 : Advanced video coding for generic audiovisual services",
      "href": "https://www.itu.int/ITU-T/recommendations/rec.aspx?rec=13189",
      "date": "2017-04-13"
    },
    "HTML": {
      "title": "HTML",
      "href": "https://www.w3.org/TR/html/",
      "status": "W3C Recommendation",
      "publisher": "W3C",
      "id": "html"
    },
    "IDRegistry": {
      "title": "EPUB Identifiers Registry",
      "href": "https://www.idpf.org/epub/registries/identifiers/"
    },
    "Indexes": {
      "title": "EPUB Indexes",
      "href": "http://www.idpf.org/epub/idx"
    },
    "IPA": {
      "title": "IPA Chart",
      "href": "https://www.internationalphoneticassociation.org/content/full-ipa-chart",
      "publisher": "International Phonetic Association",
      "date": "2005"
    },
    "ISO24751-3": {
      "title": " ISO/IEC 24751-3:2008 Information technology -- Individualized adaptability and accessibility in e-learning, education and training -- Part 3: &quot;Access for all&quot; digital resource description",
      "href": "http://www.iso.org/iso/catalogue_detail?csnumber=43604",
      "date": "2008-10-01"
    },
    "ISOSchematron": {
      "title": "ISO/IEC 19757-3: Rule-based validation — Schematron",
      "href": "http://standards.iso.org/ittf/PubliclyAvailableStandards/c040833_ISO_IEC_19757-3_2006(E).zip",
      "date": "2006-06-01"
    },
    "LinkVocab": {
      "title": "EPUB Metadata Link Vocabulary",
      "href": "http://www.idpf.org/epub/vocab/package/link/"
    },
    "ManifestRole": {
      "title": "EPUB Manifest Role",
      "href": "http://www.idpf.org/epub/vocab/package/roles/manifest"
    },
    "ManifestVocab": {
      "title": "EPUB Manifest Properties Vocabulary",
      "href": "http://www.idpf.org/epub/vocab/package/item"
    },
    "MARCRelators": {
      "title": "MARC Code List for Relators",
      "href": "http://www.loc.gov/marc/relators/"
    },
    "MediaOverlays": {
      "title": "EPUB Media Overlays 3.1",
      "href": "http://www.idpf.org/epub3/latest/mediaoverlays"
    },
    "MediaOverlays32": {
      "title": "EPUB Media Overlays 3.2",
      "href": "epub-mediaoverlays.html"
    },
    "MediaOverlays31": {
      "title": "EPUB Media Overlays 3.1",
      "href": "http://www.idpf.org/epub/31/spec/epub-mediaoverlays.html"
    },
    "MediaOverlays301": {
      "title": "EPUB Media Overlays 3.0.1",
      "href": "http://www.idpf.org/epub/301/spec/epub-mediaoverlays.html"
    },
    "MediaOverlays30": {
      "title": "EPUB Media Overlays 3.0",
      "href": "http://www.idpf.org/epub/30/spec/epub30-mediaoverlays.html"
    },
    "MetaVocab": {
      "title": "EPUB Meta Properties Vocabulary",
      "href": "http://www.idpf.org/epub/vocab/package/meta"
    },
    "MultipleRenditions": {
      "title": "EPUB Multiple-Rendition Publications 1.0",
      "href": "http://www.idpf.org/epub/renditions/multiple/epub-multiple-renditions-20150826.html",
      "date": "26 August 2015"
    },
    "NVDL": {
      "title": "ISO/IEC 19757-4: NVDL (Namespace-based Validation Dispatching Language)",
      "href": "http://standards.iso.org/ittf/PubliclyAvailableStandards/c038615_ISO_IEC_19757-4_2006(E).zip",
      "date": "2006-06-01"
    },
    "OCF32": {
      "title": "Open Container Format (OCF) 3.2",
      "href": "epub-ocf.html"
    },
    "OCF31": {
      "title": "Open Container Format (OCF) 3.1",
      "href": "http://www.idpf.org/epub/31/spec/epub-ocf.html"
    },
    "OCF301": {
      "title": "EPUB Open Container Format (OCF) 3.0.1",
      "href": "http://www.idpf.org/epub/301/spec/epub-ocf.html"
    },
    "OCF30": {
      "title": "EPUB Open Container Format (OCF) 3.0",
      "href": "http://www.idpf.org/epub/30/spec/epub30-ocf.html"
    },
    "OCF2": {
      "title": "EPUB Open Container Format (OCF) 2.0.1",
      "href": "http://www.idpf.org/epub/20/spec/OCF_2.0.1_draft.doc"
    },
    "ODF": {
      "title": "Open Document Format for Office Applications (OpenDocument) v1.0",
      "href": "https://www.oasis-open.org/committees/download.php/12572/OpenDocument-v1.0-os.pdf",
      "date": "1 May 2005",
      "id": "odf"
    },
    "ONIX": {
      "title": "ONIX for Books",
      "href": "http://www.editeur.org/"
    },
    "OPF2": {
      "title": "Open Packaging Format 2.0.1",
      "href": "http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm"
    },
    "OPS2": {
      "title": "Open Publication Structure 2.0.1",
      "href": "http://www.idpf.org/epub/20/spec/OPS_2.0.1_draft.htm"
    },
    "OverlaysVocab": {
      "title": "EPUB 3.1 Media Overlays Vocabulary",
      "href": "http://www.idpf.org/epub/vocab/overlays/#"
    },
    "PackageDocPrefixes": {
      "title": "EPUB Package Document Reserved Prefixes",
      "href": "http://www.idpf.org/epub/vocab/package/pfx"
    },
    "Packages": {
      "title": "EPUB Packages 3",
      "href": "http://www.idpf.org/epub3/latest/packages"
    },
    "Packages32": {
      "title": "EPUB Packages 3.2",
      "href": "epub-packages.html"
    },
    "Packages31": {
      "title": "EPUB Packages 3.1",
      "href": "http://www.idpf.org/epub/31/spec/epub-packages.html"
    },
    "Previews": {
      "title": "EPUB Previews",
      "href": "http://www.idpf.org/epub/previews/"
    },
    "Publications301": {
      "title": "EPUB Publications 3.0.1",
      "href": "http://www.idpf.org/epub/301/spec/epub-publications.html"
    },
    "Publications30": {
      "title": "EPUB Publications 3.0",
      "href": "http://www.idpf.org/epub/30/spec/epub30-publications.html"
    },
    "RegionNav": {
      "title": "EPUB Region-Based Navigation",
      "href": "http://www.idpf.org/epub/renditions/region-nav"
    },
    "RenditionVocab": {
      "title": "EPUB Package Rendering Vocabulary",
      "href": "http://www.idpf.org/vocab/rendition"
    },
    "RFC": {
      "title": "Request for Comments",
      "href": "https://www.ietf.org/standards/rfcs/",
      "id": "rfc"
    },
    "RoleExtensions": {
      "title": "EPUB Collection Element Role Extensions",
      "href": "http://www.idpf.org/epub/extensions/roles"
    },
    "RoleRegistry": {
      "title": "EPUB Collection Roles Registry",
      "href": "http://www.idpf.org/epub/registries/roles"
    },
    "schema.org": {
      "title": "schema.org",
      "href": "https://schema.org"
    },
    "SchemaGuide": {
      "title": "Schema.org Metadata Integration Guide for EPUB 3",
      "href": "http://www.idpf.org/epub/guides/schema-org-integration"
    },
    "ScriptableComponents": {
      "title": "EPUB Scriptable Components 1.0",
      "href": "http://www.idpf.org/epub/sc/api"
    },
    "ScriptableComponents-Packaging": {
      "title": "EPUB Scriptable Components Packaging and Integration 1.0",
      "href": "http://www.idpf.org/epub/sc/pkg"
    },
    "SHA-1": {
      "title": "Federal Information Processing Standards Publication 180-3: Secure Hash Standard (SHS)",
      "href": "http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf",
      "date": "October 2008"
    },
    "SpineVocab": {
      "title": "EPUB Spine Properties Vocabulary",
      "href": "http://www.idpf.org/epub/vocab/package/itemref"
    },
    "SVG": {
      "title": "SVG",
      "href": "https://www.w3.org/TR/SVG/",
      "publisher": "W3C"
    },
    "SWF": {
      "title": "SWF File Format Specification</link> Version 19",
      "href": "http://wwwimages.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf-file-format-spec.pdf",
      "date": "2012"
    },
    "TR15": {
      "title": "Unicode Normalization Forms",
      "href": "http://www.unicode.org/reports/tr15/",
      "id": "tr15"
    },
    "TrueType": {
      "title": "Apple TrueType Reference Manual",
      "href": "https://developer.apple.com/fonts/TrueType-Reference-Manual/",
      "publisher": "Apple",
      "date": "2002"
    },
    "TypesRegistry": {
      "title": "EPUB Publication Types Registry",
      "href": "http://www.idpf.org/epub/vocab/package/types"
    },
    "US-ASCII": {
      "title": "&quot;Coded Character Set - 7-bit American Standard Code for Information Interchange&quot;, ANSI X3.4, 1986.",
      "id": "us-ascii"
    },
    "W3CProcess": {
      "title": "World Wide Web Consortium Process Document",
      "href": "https://www.w3.org/2015/Process-20150901/",
      "authors": [
        "Charles McCathie-Nevile"
      ],
      "date": "1 September 2015"
    },
    "XPTRSH": {
      "title": "XPointer Shorthand Notation",
      "href": "https://www.w3.org/TR/2003/REC-xptr-framework-20030325/",
      "date": "25 March 2003"
    }
  },
  "preProcess": [
    null,
    null
  ],
  "postProcess": [
    null
  ],
  "publishISODate": "2019-05-08T00:00:00.000Z",
  "generatedSubtitle": "Final Community Group Specification 08 May 2019"
}</script>
<meta name="description" content="この仕様は、単一のファイル コンテナ、EPUB コンテナ内のEPUB® 出版物から成る関連したリソースのセットをカプセル化するためのファイル フォーマットと処理モデルを定義する。">
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/cg-final">
<link rel="stylesheet" type="text/css" href="../css/translation-memo-2016.css"/>
</head>
<body class="h-entry toc-inline">
<div class="translation-attention">
<p>この文書は「<a href="https://www.w3.org/publishing/epub3/epub-ocf.html">EPUB Open Container Format (OCF) 3.2</a>」の日本語訳である。最新の文書は <a href="https://www.w3.org/publishing/epub3/epub-ocf.html">https://www.w3.org/publishing/epub3/epub-ocf.html</a> である。原文もしくは完全な情報は、<a href="https://www.w3.org/publishing/epub3/epub-ocf.html">EPUB Open Container Format (OCF) 3.2</a> を参照されたい。</p>
<p>この日本語訳は参考である。公式な文書ではなく、翻訳・解釈の正確性を保証していない。</p>
<dl>
<dt>公開日:</dt>
<dd>2019年7月29日</dd>
<dt>翻訳者:</dt>
<dd>Wataru Yoshimura</dd>
</dl>
</div>
<div class="head">
<a class="logo" href="https://www.w3.org/"><img alt="W3C" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" height="48"></a>
<h1 class="title p-name" id="title">EPUB Open Container Format (OCF) 3.2</h1>
<h2>Final Community Group Specification <time class="dt-published" datetime="2019-05-08">2019年5月8日</time></h2>
<dl>
<dt>Latest editor's draft:</dt>
<dd><a href="https://w3c.github.io/publ-epub-revision/epub32/spec/epub-ocf.html">https://w3c.github.io/publ-epub-revision/epub32/spec/epub-ocf.html</a></dd>
<dt>Editor:</dt>
<dd class="p-author h-card vcard"><span class="p-name fn">Garth Conboy</span> (<a class="p-org org h-org h-card" href="https://www.google.com">Google</a>)</dd>
<dt>Former editors:</dt>
<dd class="p-author h-card vcard"><span class="p-name fn">James Pritchett</span> (<a class="p-org org h-org h-card" href="https://www.learningally.org/">Learning Ally</a>)</dd>
<dd class="p-author h-card vcard"><span class="p-name fn">Markus Gylling</span> (<a class="p-org org h-org h-card" href="https://www.idpf.org">International Digital Publishing Forum (IDPF)</a>)</dd>
<dt>Participate:</dt>
<dd><a href="https://github.com/w3c/publ-epub-revision/">GitHub w3c/publ-epub-revision</a></dd>
<dd><a href="https://github.com/w3c/publ-epub-revision/issues/">File a bug</a></dd>
<dd><a href="https://github.com/w3c/publ-epub-revision/commits/master">Commit history</a></dd>
<dd><a href="https://github.com/w3c/publ-epub-revision/pulls/">Pull requests</a></dd>
</dl>
<p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 1999-2019 International Digital Publishing Forum™ and W3C® (MIT, ERCIM, Keio, Beihang)</p>
<p class="copyright">EPUB is a registered trademark of the International Digital Publishing Forum.</p>
<hr title="Separator for header">
</div>
<section id="abstract" class="introductory">
<h2>要約</h2>
<p>この仕様は、単一のファイル コンテナ、<a href="epub-spec.html#dfn-epub-container">EPUB コンテナ</a>内の<a data-lt="EPUB Publication" href="epub-spec.html#dfn-epub-publication">EPUB® 出版物</a>から成る関連したリソースのセットをカプセル化するためのファイル フォーマットと処理モデルを定義する。</p>
<p>この仕様書は、抽象的（<a href="#sec-container-abstract">抽象コンテナ</a>）なファイルコレクションを構造化のための規則と、ZIP アーカイブ（<a href="#sec-container-zip">ZIP コンテナ</a>）内のこの抽象コンテナを表現するための規則を定義する。ZIP コンテナのための規則は、[<cite><a class="bibref" href="#bib-odf">ODF</a></cite>] によって使用される ZIP 技術に基づいて構築される。OCF は、この機能を必要とする EPUB 出版物のために、埋め込んだリソース、例えばフォントなどを難読化する方法を定義する。</p>
<p>この仕様は、XML および Web 標準に基づいて、デジタル出版物の交換や配信形式を構成する EPUB 3 [<cite><a class="bibref" href="#bib-epub32">EPUB32</a></cite>] の<a href="epub-spec.html#sec-intro-epub-specs">仕様群</a>のひとつである。これは EPUB 3 を構成する他の仕様を読み、調和して理解されることになっている。</p>
<p>この仕様書と前身の違いの詳細については [<cite><a class="bibref" href="#bib-epub32changes">EPUB32Changes</a></cite>] を参照されたい。</p>
</section>
<section id="sotd" class="introductory">
<h2>このドキュメントのステータス</h2>
<p>この仕様は、<a href="https://www.w3.org/community/epub3/">EPUB 3 Community Group</a> によって発行された。W3C 規格ではなく、W3C の規格化手順でもない。<a href="https://www.w3.org/community/about/agreements/final/">W3C Community Final Specification Agreement (FSA)</a> の下では、他の条件が適用されることに注意されたい。<a href="https://www.w3.org/community/">W3C Community 及び Business Groups</a> に関して学ばれたい。</p>
<p>このドキュメントに関するコメントを投稿したい場合、<a href="mailto:public-epub3@w3.org">public-epub3@w3.org</a>（<a href="mailto:public-epub3-request@w3.org?subject=subscribe">subscribe</a>、<a href="https://lists.w3.org/Archives/Public/public-epub3/">archives</a>）に送信されたい。</p>
</section>
<nav id="toc">
<h2 class="introductory" id="table-of-contents">目次</h2>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#sec-introduction"><span class="secno">1. </span>まえがき</a>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#sec-terminology"><span class="secno">1.1 </span>用語</a></li>
<li class="tocline"><a class="tocxref" href="#conformance"><span class="secno">1.2 </span>適合性</a></li>
</ol>
</li>
<li class="tocline"><a class="tocxref" href="#sec-ocf-conformance"><span class="secno">2. </span>OCF 適合性</a>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#ocf-conformance-container"><span class="secno">2.1 </span>コンテナの適合性</a></li>
<li class="tocline"><a class="tocxref" href="#ocf-conformance-rs"><span class="secno">2.2 </span>リーディング システムの適合性</a></li>
</ol>
</li>
<li class="tocline"><a class="tocxref" href="#sec-container-abstract"><span class="secno">3. </span>OCF 抽象コンテナ</a>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#sec-container-abstract-intro"><span class="secno">3.1 </span>導入</a></li>
<li class="tocline"><a class="tocxref" href="#sec-container-file-and-dir-structure"><span class="secno">3.2 </span>ファイルとディレクトリの構造</a></li>
<li class="tocline"><a class="tocxref" href="#sec-container-iri"><span class="secno">3.3 </span>他のコンポーネントを参照するための相対 IRI</a></li>
<li class="tocline"><a class="tocxref" href="#sec-container-filenames"><span class="secno">3.4 </span>ファイル名</a></li>
<li class="tocline"><a class="tocxref" href="#sec-container-metainf"><span class="secno">3.5 </span><code>META-INF</code> ディレクトリ</a>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#sec-container-metainf-inc"><span class="secno">3.5.1 </span>導入</a></li>
<li class="tocline"><a class="tocxref" href="#sec-container-metainf-files"><span class="secno">3.5.2 </span>予約済みファイル</a>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#sec-container-metainf-container.xml"><span class="secno">3.5.2.1 </span>コンテナ ファイル (<code>container.xml</code>)</a></li>
<li class="tocline"><a class="tocxref" href="#sec-container-metainf-encryption.xml"><span class="secno">3.5.2.2 </span>暗号化ファイル (<code>encryption.xml</code>)</a>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#sec-enc-compression"><span class="secno">3.5.2.2.1 </span>圧縮と暗号化の順番</a></li>
</ol>
</li>
<li class="tocline"><a class="tocxref" href="#sec-container-metainf-manifest.xml"><span class="secno">3.5.2.3 </span>マニフェスト ファイル (<code>manifest.xml</code>)</a></li>
<li class="tocline"><a class="tocxref" href="#sec-container-metainf-metadata.xml"><span class="secno">3.5.2.4 </span>メタデータ ファイル (<code>metadata.xml</code>)</a></li>
<li class="tocline"><a class="tocxref" href="#sec-container-metainf-rights.xml"><span class="secno">3.5.2.5 </span>著作権管理ファイル (<code>rights.xml</code>)</a></li>
<li class="tocline"><a class="tocxref" href="#sec-container-metainf-signatures.xml"><span class="secno">3.5.2.6 </span>電子署名ファイル (<code>signatures.xml</code>)</a></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li class="tocline"><a class="tocxref" href="#sec-container-zip"><span class="secno">4. </span>OCF ZIP コンテナ</a>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#sec-container-zip-intro"><span class="secno">4.1 </span>導入</a></li>
<li class="tocline"><a class="tocxref" href="#sec-zip-container-zipreqs"><span class="secno">4.2 </span>ZIP ファイルの要件</a></li>
<li class="tocline"><a class="tocxref" href="#sec-zip-container-mime"><span class="secno">4.3 </span>OCF ZIP コンテナのメディア タイプの識別</a></li>
</ol>
</li>
<li class="tocline"><a class="tocxref" href="#sec-resource-obfuscation"><span class="secno">5. </span>リソース難読化</a>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#fobfus-intro"><span class="secno">5.1 </span>導入</a></li>
<li class="tocline"><a class="tocxref" href="#obfus-keygen"><span class="secno">5.2 </span>難読化キー</a></li>
<li class="tocline"><a class="tocxref" href="#obfus-algorithm"><span class="secno">5.3 </span>難読化アルゴリズム</a></li>
<li class="tocline"><a class="tocxref" href="#obfus-specifying"><span class="secno">5.4 </span>難読化されたリソースの指定</a></li>
</ol>
</li>
<li class="tocline"><a class="tocxref" href="#app-schemas"><span class="secno">A. </span>Schemas</a>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#app-schema-container"><span class="secno">A.1 </span><code>container.xml</code> のスキーマ</a></li>
<li class="tocline"><a class="tocxref" href="#app-schema-encryption"><span class="secno">A.2 </span><code>encryption.xml</code> のスキーマ</a></li>
<li class="tocline"><a class="tocxref" href="#app-schema-signatures"><span class="secno">A.3 </span><code>signatures.xml</code> のスキーマ</a></li>
</ol>
</li>
<li class="tocline"><a class="tocxref" href="#example"><span class="secno">B. </span>例</a></li>
<li class="tocline"><a class="tocxref" href="#app-media-type"><span class="secno">C. </span><code>application/epub+zip</code> メディア タイプ</a></li>
<li class="tocline"><a class="tocxref" href="#app-contributors"><span class="secno">D. </span>謝辞と貢献者</a></li>
<li class="tocline"><a class="tocxref" href="#references"><span class="secno">E. </span>参照・参考</a>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#normative-references"><span class="secno">E.1 </span>規定の参照</a></li>
<li class="tocline"><a class="tocxref" href="#informative-references"><span class="secno">E.2 </span>規定ではない参照</a></li>
</ol>
</li>
</ol>
</nav>
<section id="sec-introduction">
<!--OddPage-->
<h2 id="x1-introduction"><span class="secno">1. </span>まえがき<a class="self-link" aria-label="§" href="#sec-introduction"></a></h2>
<section id="sec-terminology">
<h3 id="x1-1-terminology"><span class="secno">1.1 </span>用語<a class="self-link" aria-label="§" href="#sec-terminology"></a></h3>
<p>EPUB 3 で固有の意味を持つ用語は、このドキュメントで利用される（例えば、「著者」や「リーディング システム」）。これら<a href="epub-spec.html#sec-terminology">用語と定義</a>の完全なリストは、[<cite><a class="bibref" href="#bib-epub32">EPUB32</a></cite>] で提供されている。</p>
<p>セクションにある用語の最初のインスタンスのみが、その定義にリンクされる。</p>
<p>また、以下の用語は、この仕様で使用するために定義されている。</p>
<dl class="termlist">
<dt><dfn id="dfn-codec" data-lt="コーデック|Codec" data-dfn-type="dfn">コーデック（Codec）</dfn></dt>
<dd>
<p>コーデックは、例えば、動画と音声メディア タイプなどを最適な圧縮のために設計され、また、最適化されたストリーミング機能を提供する、本質的なバイナリ形式の品質を持っているコンテンツを指す。</p>
</dd>
<dt><dfn id="dfn-default-rendition" data-lt="初期設定のレンディション|Default Rendition" data-dfn-type="dfn">初期設定のレンディション（Default Rendition）</dfn></dt>
<dd>
<p><a href="#sec-container-metainf-container.xml">container.xml</a> ファイルの最初の <code>rootfile</code> 要素に記載される<a href="epub-spec.html#dfn-rendition">レンディション</a>。</p>
</dd>
<dt><dfn id="dfn-file-name" data-lt="ファイル名|File Name" data-dfn-type="dfn">ファイル名（File Name）</dfn></dt>
<dd>
<p>ディレクトリかディレクトリ内のファイルかにかかわらず、<a href="#dfn-ocf-abstract-container" class="internalDFN" data-link-type="dfn">OCF 抽象コンテナ</a>内にあるファイルの全てのタイプの名前。</p>
</dd>
<dt><dfn id="dfn-non-codec" data-lt="非コーデック|Non-Codec" data-dfn-type="dfn">非コーデック（Non-Codec）</dfn></dt>
<dd>
<p>非コーデックは、（例えば、HTML、CSS など）文字列に基づいたファイル形式のように、それらの内部データ構造の性質のおかげで、圧縮の利益を受けるコンテンツ タイプを指す。</p>
</dd>
<dt><dfn id="dfn-ocf-abstract-container" data-lt="OCF 抽象コンテナ|OCF Abstract Container" data-dfn-type="dfn">OCF 抽象コンテナ（OCF Abstract Container）</dfn></dt>
<dd>
<p>OCF 抽象コンテナは、<a href="#sec-container-abstract"><em>OCF 抽象コンテナ</em></a>で定義されているように、<a href="#dfn-zip-container">OCF ZIP コンテナ</a>のコンテンツのために、ファイル システムのモデルを定義する。</p>
</dd>
<dt><dfn id="dfn-ocf-processor" data-lt="OCF プロセッサ|OCF Processor" data-dfn-type="dfn">OCF プロセッサ（OCF Processor）</dfn></dt>
<dd>
<p>この本仕様の要件に従って <a href="#dfn-zip-container" class="internalDFN" data-link-type="dfn">OCF ZIP コンテナ</a>を処理するソフトウェア アプリケーション。</p>
</dd>
<dt><dfn id="dfn-zip-container" data-lt="OCF ZIP コンテナ|OCF ZIP Container" data-dfn-type="dfn">OCF ZIP コンテナ（OCF ZIP Container）</dfn></dt>
<dd>
<p><a href="#sec-container-zip"><em>OCF ZIP コンテナ</em></a>に定義されているように、EPUB 出版物の ZIP ベースのパッケージングと配布形式。</p>
<p>OCF ZIP コンテナと <a href="epub-spec.html#dfn-epub-container">EPUB コンテナ</a>は、同義である。</p>
</dd>
<dt><dfn id="dfn-path-name" data-lt="パス名|Path Name" data-dfn-type="dfn">パス名（Path Name）</dfn></dt>
<dd>
<p><a href="#sec-container-abstract">OCF 抽象コンテナ</a>内の特定のディレクトリのために、ディレクトリのファイル名を分離する <code>/</code>（<code>U+002F</code>）文字列で連結されたフルパスにある全てのディレクトリの<a href="#dfn-file-name" class="internalDFN" data-link-type="dfn">ファイル名</a>を保持する文字列。</p>
<p>OCF 抽象コンテナ内の特定のファイルのために、パス名は、ファイルのファイル名の後に <code>/</code> 文字列に続く、ディレクトリのファイル名を分離する <code>/</code> 文字列で連結された全てのディレクトリのファイル名を保持する文字列である。</p>
</dd>
<dt><dfn id="dfn-root-directory" data-lt="ルート ディレクトリ|Root Directory" data-dfn-type="dfn">ルート ディレクトリ（Root Directory）</dfn></dt>
<dd>
<p>ルート ディレクトリは、<a href="#dfn-ocf-abstract-container" class="internalDFN" data-link-type="dfn">OCF 抽象コンテナ</a>ファイル システムの基点を表現する。このディレクトリは、性質上、仮想で、<a href="epub-spec.html#dfn-epub-reading-system">EPUB リーディング システム</a>は、コンテンツが解凍されているとき、OCF 抽象コンテナのコンテンツのための物理的なルート ディレクトリを生成するかもしれないし、しないかもしれない。</p>
</dd>
</dl>
</section>
<section id="conformance">
<h3 id="x1-2-conformance"><span class="secno">1.2 </span>適合性<a class="self-link" aria-label="§" href="#conformance"></a></h3>
<p>規定ではないとマークされたセクションと同様に、この仕様書の全てのオーサリング ガイドライン、図、例及び注意は規定ではない。この仕様書の他の全ては規定である。</p>
<p>キー ワード <em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">MUST NOT</em>、<em class="rfc2119">RECOMMENDED</em>、<em class="rfc2119">SHOULD</em> 及び <em class="rfc2119">SHOULD NOT</em> は、[<cite><a class="bibref" href="#bib-rfc2119">RFC2119</a></cite>] の宣言に従って解釈される。</p>
</section>
</section>
<section id="sec-ocf-conformance">
<!--OddPage-->
<h2 id="x2-ocf-conformance"><span class="secno">2. </span>OCF 適合性<a class="self-link" aria-label="§" href="#sec-ocf-conformance"></a></h2>
<section id="ocf-conformance-container">
<h3 id="x2-1-container-conformance"><span class="secno">2.1 </span>コンテナの適合性<a class="self-link" aria-label="§" href="#ocf-conformance-container"></a></h3>
<ul class="conformance-list">
<li>
<p id="confreq-ocf-content-abstr"><span class="link-marker"><a href="#confreq-ocf-content-abstr" class="hidden-reveal"><span>&nbsp;</span></a> </span>OCF 抽象コンテナは、<a href="#sec-container-abstract"><em>OCF 抽象コンテナ</em></a>で定義された適合性要件を満たさなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
<li>
<p id="confreq-ocf-content-zip"><span class="link-marker"><a href="#confreq-ocf-content-zip" class="hidden-reveal"><span>&nbsp;</span></a> </span>OCF ZIP コンテナは、<a href="#sec-container-zip"><em>OCF ZIP コンテナ</em></a>で定義された適合性要件を満たさなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
</ul>
</section>
<section id="ocf-conformance-rs">
<h3 id="x2-2-reading-system-conformance"><span class="secno">2.2 </span>リーディング システムの適合性<a class="self-link" aria-label="§" href="#ocf-conformance-rs"></a></h3>
<p><a href="epub-spec.html#dfn-epub-reading-system">EPUB リーディング システム</a>は、以下の基準全てを満たさなければならない（<em class="rfc2119" title="MUST">MUST</em>）：</p>
<ul class="conformance-list">
<li>
<p id="confreq-ocf-rs-zip"><span class="link-marker"><a href="#confreq-ocf-rs-zip" class="hidden-reveal"><span>&nbsp;</span></a> </span>それは、<a href="#sec-container-zip"><em>OCF ZIP コンテナ</em></a>で表現されたすべてのリーディング システムの適合性要件に適合する OCF ZIP コンテナを処理しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
<li>
<p id="confreq-ocf-fobfus"><span class="link-marker"><a href="#confreq-ocf-fobfus" class="hidden-reveal"><span>&nbsp;</span></a> </span>それが、<a href="epub-spec.html#dfn-viewport">ビューポート</a>を持つ場合、<a href="#sec-resource-obfuscation"><em>リソース難読化</em></a>で定義されたリソースの解読をサポートしなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
</ul>
</section>
</section>
<section id="sec-container-abstract">
<!--OddPage-->
<h2 id="x3-ocf-abstract-container"><span class="secno">3. </span>OCF 抽象コンテナ<a class="self-link" aria-label="§" href="#sec-container-abstract"></a></h2>
<section id="sec-container-abstract-intro" class="informative">
<h3 id="x3-1-introduction"><span class="secno">3.1 </span>導入<a class="self-link" aria-label="§" href="#sec-container-abstract-intro"></a></h3>
<p><em>このセクションは規定ではない。</em></p>
<p><a href="#dfn-ocf-abstract-container" class="internalDFN" data-link-type="dfn">OCF 抽象コンテナ</a>のファイル システムのモデルは、コンテンツのすべてに単一で共通の<a href="#dfn-root-directory" class="internalDFN" data-link-type="dfn">ルート ディレクトリ</a>を使用する。<a href="epub-spec.html#dfn-epub-publication">EPUB 出版物</a>の全ての<a href="epub-spec.html#dfn-local-resource">ローカル リソース</a>は、ルート ディレクトリを先頭にしてディレクトリ ツリー内に配置されるが、この仕様によって強制される、それらのための特定のファイル システム構造はない。</p>
<p>ファイル システムのモデルは、ルート ディレクトリの直接の子で、以下の特別なファイルを補完するに利用する <code>META-INF</code> という名前の必須ディレクトリを包含する。</p>
<dl class="variablelist">
<dt><code>container.xml</code> <code>[必須]</code></dt>
<dd>
<p>EPUB 出版物の各<span><a href="epub-spec.html#dfn-rendition">レンディション</a></span>を定義する<a href="epub-spec.html#dfn-package-document">パッケージ ドキュメント</a>を識別する。</p>
</dd>
<dt><code>signatures.xml</code> <code>[省略可]</code></dt>
<dd>
<p>様々な資産のためのデジタル署名が含まれている。</p>
</dd>
<dt><code>encryption.xml</code> <code>[省略可]</code></dt>
<dd>
<p><a href="epub-spec.html#dfn-publication-resource">出版物リソース</a>の暗号化に関する情報が含まれている。このファイルは、<a href="#sec-resource-obfuscation">難読化</a>をするとき、必須である。</p>
</dd>
<dt><code>metadata.xml</code> <code>[省略可]</code></dt>
<dd>
<p><a href="#dfn-zip-container" class="internalDFN" data-link-type="dfn">OCF ZIP コンテナ</a>に関するメタデータを格納するために使用する。</p>
</dd>
<dt><code>rights.xml</code> <code>[省略可]</code></dt>
<dd>
<p>デジタル著作権に関する情報を格納するために使用する。</p>
</dd>
<dt><code>manifest.xml</code> <code>[省略可]</code></dt>
<dd>
<p>オープン ドキュメント フォーマット [<cite><a class="bibref" href="#bib-odf">ODF</a></cite>] によって許可されるコンテナ コンテンツのマニフェスト。</p>
</dd>
</dl>
<p><code>META-INF</code> ディレクトリの各ファイルのための適合性要件は、<a href="#sec-container-metainf"><code>META-INF</code> ディレクトリ</a>で定義されている。</p>
</section>
<section id="sec-container-file-and-dir-structure">
<h3 id="x3-2-file-and-directory-structure"><span class="secno">3.2 </span>ファイルとディレクトリの構造<a class="self-link" aria-label="§" href="#sec-container-file-and-dir-structure"></a></h3>
<p><a href="#dfn-ocf-abstract-container" class="internalDFN" data-link-type="dfn">OCF 抽象コンテナ</a>のための仮想ファイル システムは、コンテナのコンテンツのすべてに単一の共通の<a href="#dfn-root-directory" class="internalDFN" data-link-type="dfn">ルート ディレクトリ</a>を持たなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<p>OCF 抽象コンテナは、コンテナのルート ディレクトリの直接の子である <code>META-INF</code> という名前のディレクトリを包含しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。このディレクトリのコンテンツのための要件は、<a href="#sec-container-metainf"><code>META-INF</code> ディレクトリ</a>に記載されている。</p>
<p>ルート ディレクトリにあるファイル名の <code>mimetype</code> は、<a href="#sec-container-zip"><em>OCF ZIP コンテナ</em></a>で説明されているとおり、<a href="#dfn-zip-container">OCF ZIP コンテナ</a>によって使用するために予約済みである。</p>
<p>OCF 抽象コンテナ内の他の全てのファイルは、<code>META-INF</code> ディレクトリ内に存在せず提供され、ルート ディレクトリから任意の場所の子孫でもよい（<em class="rfc2119" title="MAY">MAY</em>）。</p>
</section>
<section id="sec-container-iri">
<h3 id="x3-3-relative-iris-for-referencing-other-components"><span class="secno">3.3 </span>他のコンポーネントを参照するための相対 IRI<a class="self-link" aria-label="§" href="#sec-container-iri"></a></h3>
<p><a href="#dfn-ocf-abstract-container" class="internalDFN" data-link-type="dfn">OCF 抽象コンテナ</a>内のファイルは、相対 IRI 参照（[<cite><a class="bibref" href="#bib-rfc3987">RFC3987</a></cite>] と [<cite><a class="bibref" href="#bib-rfc3986">RFC3986</a></cite>]）経由して相互に参照しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<aside class="example" id="example-1">
<div class="marker"><a class="self-link" href="#example-1">Example 1</a></div>
<p>次の例は、<a href="epub-spec.html#dfn-xhtml-content-document">XHTML コンテンツ ドキュメント</a>と同じディレクトリにあるファイル名 <code>image1.jpg</code> が、どのように [<cite><a class="bibref" href="#bib-html">HTML</a></cite>] の <code>img</code> 要素から参照されるかを示している。</p>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"image1.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"…"</span> /&gt;</span></code></pre>
</aside>
<p>相対 IRI 参照は、ベース IRI [<cite><a class="bibref" href="#bib-rfc3986">RFC3986</a></cite>]  に与えられたファイル形式に関連のある言語仕様によって決定される。例えば、CSS は、CSS スタイルシートとプロパティ宣言 [<cite><a class="bibref" href="#bib-csssnapshot">CSSSnapshot</a></cite>] のコンテクストでどのように相対 IRI 参照が動作するのかを定義する。</p>
<div class="note" role="note" id="issue-container-generatedID">
<div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>Note</span></div>
<div class="">
<p>いくつかの言語仕様は、先行する [<cite><a class="bibref" href="#bib-rfc3987">RFC3987</a></cite>] の リクエスト フォー コメンツ [<cite><a class="bibref" href="#bib-rfc">RFC</a></cite>] を参照し、その場合、以前の RFC は、特定の言語でコンテンツに適用される。</p>
</div>
</div>
<p>ほとんどの言語仕様とは異なり、<code>META-INF</code> ディレクトリ内の全てのファイルのためのベース IRI は、初期設定のベース IRI としてOCF 抽象コンテナの<a href="#dfn-root-directory" class="internalDFN" data-link-type="dfn">ルート ディレクトリ</a>を使用する。</p>
<p>例えば、<code>META-INF/container.xml</code> が以下の内容の場合：</p>
<div class="example" id="example-2">
<div class="marker"><a class="self-link" href="#example-2">Example 2</a></div>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.0"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">rootfiles</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">rootfile</span> <span class="hljs-attr">full-path</span>=<span class="hljs-string">"EPUB/Great_Expectations.opf"</span>
<span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/oebps-package+xml"</span> /&gt;</span>	
<span class="hljs-tag">&lt;/<span class="hljs-name">rootfiles</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></code></pre>
</div>
<p>この場合、<code>EPUB/Great Expectations.opf</code> のパスは OCF 抽象コンテナのためのルートディレクトリから相対であり、<code>META-INF</code> ディレクトリからの相対ではない。</p>
<p>全ての相対 IRI 参照は、OCF 抽象コンテナ内のリソース（すなわち、ルート ディレクトリ以下）を解決しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</section>
<section id="sec-container-filenames">
<h3 id="x3-4-file-names"><span class="secno">3.4 </span>ファイル名<a class="self-link" aria-label="§" href="#sec-container-filenames"></a></h3>
<p>このセクションで説明された<a href="#dfn-file-name" class="internalDFN" data-link-type="dfn">ファイル名</a>の制約は、最も一般的に使用されているオペレーティング システム上で変更なしに使用されている<a href="#dfn-path-name" class="internalDFN" data-link-type="dfn">パス名</a>とファイル名を考慮にいれて設計されている。本仕様書は、OCF ファイルとパス名を表すことのできない <a href="#dfn-ocf-processor" class="internalDFN" data-link-type="dfn">OCF プロセッサ</a>の相互互換性を補う方法を指定しない。</p>
<p><a href="#dfn-ocf-abstract-container" class="internalDFN" data-link-type="dfn">OCF 抽象コンテナ</a>のコンテクストでは、<span id="ocf-fn-cs">ファイル名とパス名の大小文字を区別し</span>、次の基準を満たさなければならない（<em class="rfc2119" title="MUST">MUST</em>）：</p>
<ul class="conformance-list">
<li>
<p id="ocf-fn-encoding"><span class="link-marker"><a href="#ocf-fn-encoding" class="hidden-reveal"><span>&nbsp;</span></a> </span>ファイル名は、UTF-8 [<cite><a class="bibref" href="#bib-unicode">Unicode</a></cite>] でエンコードしなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
<li>
<p id="ocf-fn-length"><span class="link-marker"><a href="#ocf-fn-length" class="hidden-reveal"><span>&nbsp;</span></a> </span>ファイル名は、255バイトを超えてはならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）。</p>
</li>
<li>
<p id="ocf-pn-length"><span class="link-marker"><a href="#ocf-pn-length" class="hidden-reveal"><span>&nbsp;</span></a> </span>OCF 抽象コンテナ内の任意のディレクトリまたはファイルのパス名は、65,535バイトを超えてはならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）。</p>
</li>
<li>
<p id="ocf-fn-chars"><span class="link-marker"><a href="#ocf-fn-chars" class="hidden-reveal"><span>&nbsp;</span></a> </span>ファイル名は、これらの文字は、一般的に使用されるオペレーティング・システムの間で一貫してサポートされない場合があり、以下の [<cite><a class="bibref" href="#bib-unicode">Unicode</a></cite>] は使用してはならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）：</p>
<ul>
<li>
<p>スラッシュ: <code>/</code> (<code>U+002F</code> )</p>
</li>
<li>
<p>クォーテーションマーク: <code>"</code> (<code>U+0022</code> )</p>
</li>
<li>
<p>アスタリスク: <code>*</code> (<code>U+002A</code> )</p>
</li>
<li>
<p>ピリオド: <code>.</code> (<code>U+002E</code> )</p>
</li>
<li>
<p>コロン: <code>:</code> (<code>U+003A</code> )</p>
</li>
<li>
<p>小なり記号: <code>&lt;</code> (<code>U+003C</code> )</p>
</li>
<li>
<p>大なり記号: <code>&gt;</code> (<code>U+003E</code> )</p>
</li>
<li>
<p>クエスチョンマーク: <code>?</code> (<code>U+003F</code> )</p>
</li>
<li>
<p>バックスラッシュ: <code>\</code> (<code>U+005C</code> )</p>
</li>
<li>
<p>縦線: <code>\</code> (<code>U+007C</code>)</p>
</li>
<li>
<p>DEL (<code>U+007F</code>)</p>
</li>
<li>
<p>C0 領域 (<code>U+0000 … U+001F</code> )</p>
</li>
<li>
<p>C1 領域 (<code>U+0080 … U+009F</code> )</p>
</li>
<li>
<p>私用領域 (<code>U+E000 … U+F8FF</code> )</p>
</li>
<li>
<p>アラビア表示形 A の非文字 (<code>U+FDDO … U+FDEF</code> )</p>
</li>
<li>
<p>特殊用途文字 (<code>U+FFF0 … U+FFFF</code> )</p>
</li>
<li>
<p>タグと異体字セレクタ補助 (<code>U+E0000 … U+E0FFF</code> )</p>
</li>
<li>
<p>補助私用領域A (<code>U+F0000 … U+FFFFF</code> )</p>
</li>
<li>
<p>補助私用領域B (<code>U+100000 … U+10FFFF</code> )</p>
</li>
</ul>
</li>
<li>
<p id="ocf-fn-cn"><span class="link-marker"><a href="#ocf-fn-cn" class="hidden-reveal"><span>&nbsp;</span></a> </span>同じディレクトリ内にあるすべてのファイル名は、[<cite><a class="bibref" href="#bib-unicode">Unicode</a></cite>] のセクション 3.13 で定義されているような正規化のケースに従い一意でなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
<li>
<p id="ocf-fn-an"><span class="link-marker"><a href="#ocf-fn-an" class="hidden-reveal"><span>&nbsp;</span></a> </span>同じディレクトリ内にあるすべてのファイル名は、NFC または NFD の正規化 [<cite><a class="bibref" href="#bib-tr15">TR15</a></cite>] に従い一意であるべきである（<em class="rfc2119" title="SHOULD">SHOULD</em>）。</p>
</li>
</ul>
<div class="note" role="note" id="issue-container-generatedID-0">
<div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span></div>
<div class="">
<p>いくつかの商用 ZIP ツールは、完全な Unicode の範囲をサポートしておらず、ファイル名のみ [<cite><a class="bibref" href="#bib-us-ascii">US-ASCII</a></cite>] の範囲のみサポートするかもしれない。これらの制限を持つ ZIP ツールを使うことを望む<a href="epub-spec.html#dfn-author">製作者</a>は、[<cite><a class="bibref" href="#bib-us-ascii">US-ASCII</a></cite>] 範囲にこれらのファイル名を制限することが最善であることに気づくだろう。ファイルの名前は、解凍処理の中に保存することができない場合、そのファイルはコンテンツ内のURIにより参照されるときに行われた任意の名前に変換を相殺する必要がある。</p>
</div>
</div>
</section>
<section id="sec-container-metainf">
<h3 id="x3-5-meta-inf-directory"><span class="secno">3.5 </span><code>META-INF</code> ディレクトリ<a class="self-link" aria-label="§" href="#sec-container-metainf"></a></h3>
<section id="sec-container-metainf-inc">
<h4 id="x3-5-1-inclusion"><span class="secno">3.5.1 </span>導入<a class="self-link" aria-label="§" href="#sec-container-metainf-inc"></a></h4>
<p>全ての <a href="#dfn-ocf-abstract-container" class="internalDFN" data-link-type="dfn">OCF 抽象コンテナ</a>は、それらの<a href="#dfn-root-directory" class="internalDFN" data-link-type="dfn">ルート ディレクトリ</a>に <code>META-INF</code> と呼ばれるディレクトリを包含しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<p>このディレクトリは、<a href="#sec-container-metainf-files">META-INF 予約済みファイル</a>で指定されたファイルを含む。そのセクションに記載されているもの以外のファイルは、<code class="filename">META-INF</code> ディレクトリに包含されてもよい（<em class="rfc2119" title="MAY">MAY</em>）。このようなファイルに遭遇したとき、<a href="#dfn-ocf-processor" class="internalDFN" data-link-type="dfn">OCF プロセッサ</a>は、機能しなくなってはならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）。</p>
</section>
<section id="sec-container-metainf-files">
<h4 id="x3-5-2-reserved-files"><span class="secno">3.5.2 </span>予約済みファイル<a class="self-link" aria-label="§" href="#sec-container-metainf-files"></a></h4>
<section id="sec-container-metainf-container.xml">
<h5 id="x3-5-2-1-container-file-container-xml"><span class="secno">3.5.2.1 </span>コンテナ ファイル (<code>container.xml</code>)<a class="self-link" aria-label="§" href="#sec-container-metainf-container.xml"></a></h5>
<p><code>META-INF</code> ディレクトリにある必須（<em class="rfc2119" title="REQUIRED">REQUIRED</em>）の <code>container.xml</code> ファイルは、<a href="#dfn-ocf-abstract-container" class="internalDFN" data-link-type="dfn">OCF 抽象コンテナ</a>の <a href="epub-spec.html#dfn-epub-package">EPUB パッケージ</a>を識別する。</p>
<p>このファイルのコンテンツは、（このような要素のすべての属性と内容を含む）他の名前空間から全ての要素と属性を取り除いた後に、<a href="#app-schema-container"><code>container.xml</code> のスキーマ</a>にあるスキーマに妥当でなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<p id="elemdef-container-rootfile">各 <code>rootfile</code> 要素は、<a href="epub-spec.html#dfn-epub-publication">EPUB 出版物</a>のひとつの<a href="epub-spec.html#dfn-rendition">レンディション</a>を表している<a href="epub-spec.html#dfn-package-document">パッケージ ドキュメント</a>の配置を特定しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。各レンディションは、そのコンテナと同じ EPUB のバージョンに準拠しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<p id="container-default-rendition">OCF プロセッサは、含まれている EPUB 出版物の<a href="#dfn-default-rendition">初期設定のレンダリング</a>を表現するために <code>rootfiles</code> 要素内の最初の <code>rootfile</code> 要素を考慮しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。<a href="epub-spec.html#dfn-epub-reading-system">リーディング システム</a>は、初期設定のレンディションの表示は必須（<em class="rfc2119" title="REQUIRED">REQUIRED</em>）だが、コンテナ内の他のレンディションを表示してもよい（<em class="rfc2119" title="MAY">MAY</em>）。</p>
<div class="note" role="note" id="issue-container-generatedID-1">
<div role="heading" class="note-title marker" id="h-note-1" aria-level="6"><span>Note</span></div>
<p class="">EPUB コンテナは、複数のコンテンツのレンディションを包含する能力を提供するけれども、複数のレンディションに対するリーディング システムのサポートは、レンディションの目的と意味が関係者によって保証された特殊な環境以外では、ほとんど実現できていないままである、</p>
</div>
<aside class="example" id="example-3">
<div class="marker"><a class="self-link" href="#example-3">Example 3</a></div>
<p>以下のサンプルは、ルートファイルの <code>EPUB/My Crazy Life.opf</code>（パッケージ ドキュメント）を持つ EPUB 出版物のためのサンプル <code>container.xml</code> を示している：</p>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.0"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">rootfiles</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">rootfile</span> <span class="hljs-attr">full-path</span>=<span class="hljs-string">"EPUB/My_Crazy_Life.opf"</span>
<span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/oebps-package+xml"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">rootfiles</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></code></pre>
</aside>
<aside class="example" id="example-4">
<div class="marker"><a class="self-link" href="#example-4">Example 4</a></div>
<p>以下のサンプルは、同じコンテナ内にバンドルされている SVG と XHTMLのレンディションを示している：</p>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.0"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">rootfiles</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">rootfile</span> <span class="hljs-attr">full-path</span>=<span class="hljs-string">"SVG/Sandman.opf"</span>
<span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/oebps-package+xml"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">rootfile</span> <span class="hljs-attr">full-path</span>=<span class="hljs-string">"XHTML/Sandman.opf"</span>
<span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/oebps-package+xml"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">rootfiles</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></code></pre>
</aside>
<p>省略可能（<em class="rfc2119" title="OPTIONAL">OPTIONAL</em>）な <code id="elemdef-container-links">links</code> 要素は、<a href="#dfn-zip-container" class="internalDFN" data-link-type="dfn">OCF ZIP コンテナ</a>の処理に必要なリソースを識別する。その子 <code id="elemdef-container-link">link</code> 要素のそれぞれは、値が、リソースの配置を識別する <code>href</code> 属性を包含しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。各 <code>link</code> 要素は、値が、リソースの関係性を識別する <code>rel</code> 属性もまた包含しなければならず（<em class="rfc2119" title="MUST">MUST</em>）、値が、<code>link</code> によって参照されたリソースの種類と形式を指定するメディア タイプ [<cite><a class="bibref" href="#bib-rfc2046">RFC2046</a></cite>] でなければならない（<em class="rfc2119" title="MUST">MUST</em>）<code>media-type</code> 属性を包含してもよい（<em class="rfc2119" title="MAY">MAY</em>）。</p>
<div class="note" role="note" id="issue-container-generatedID-2">
<div role="heading" class="note-title marker" id="h-note-2" aria-level="6"><span>Note</span></div>
<p class=""><code>links</code> 要素は、<a href="http://www.idpf.org/epub/renditions/multiple/#sec-4.4.4">複数のレンディションを持つ EPUB</a> のレンディション マッピング ドキュメントを指すために使用される。</p>
</div>
<p><code>rootfile</code> 要素の <code>full-path</code> 属性と <code>link</code> 要素の <code>href</code> 属性の値は、<em class="firstterm" id="def-path-component">path component</em> [<cite><a class="bibref" href="#bib-rfc3986">RFC3986</a></cite>] を含まなければならなず（<em class="rfc2119" title="MUST">MUST</em>）、要は、<em class="firstterm" id="def-path-rootless">path-rootless</em> [<cite><a class="bibref" href="#bib-rfc3986">RFC3986</a></cite>] の形式のみから得なければならない（<em class="rfc2119" title="MUST">MUST</em>）。path component は、<a href="#dfn-root-directory" class="internalDFN" data-link-type="dfn">ルート ディレクトリ</a>に相対的である。</p>
<p><a href="#dfn-ocf-processor" class="internalDFN" data-link-type="dfn">OCF プロセッサ</a>は、<code>container.xml</code> ファイル内にある外部の要素と属性を無視しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</section>
<section id="sec-container-metainf-encryption.xml">
<h5 id="x3-5-2-2-encryption-file-encryption-xml"><span class="secno">3.5.2.2 </span>暗号化ファイル (<code>encryption.xml</code>)<a class="self-link" aria-label="§" href="#sec-container-metainf-encryption.xml"></a></h5>
<p><code>META-INF</code> ディレクトリ内にある省略可能（<em class="rfc2119" title="OPTIONAL">OPTIONAL</em>）な <code>encryption.xml</code> ファイルは、コンテナのコンテンツの全ての暗号化情報を保持する。コンテナ内の任意のリソースが暗号化されているとき、<code>encryption.xml</code> は、リソースが暗号化されていることを示し、暗号化されている方法の情報を提供するために存在していなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<p>このファイルは、ルート要素の <code id="elemdef-encryption-encryption">encryption</code> の XML 文書である。<code>encryption</code> 要素は、[<cite><a class="bibref" href="#bib-xmlenc-core1">XMLENC-CORE1</a></cite>] で定義されている <code>EncryptedKey</code> と <code>EncryptedData</code> 型の子要素を含む。<code id="elemdef-encryption-EncryptedKey">EncryptedKey</code> 要素が、暗号化された各ファイルを説明するのと同時に、<code id="elemdef-encryption-EncryptedData">EncryptedData</code> 要素は、コンテナ内で使用される各暗号化キーを説明する。各 <code>EncryptedData</code> 要素は、XML Encryption で説明されているように、<code>EncryptedKey</code> 要素を参照する。</p>
<p><code>encryption.xml</code> ファイルのコンテンツは、<a href="#app-schema-encryption"><code>encryption.xml</code> のスキーマ</a>のスキーマに妥当でなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<p>OCF は、独立して個々のファイルを暗号化し、これらはセキュリティとパフォーマンスのトレードオフだが、コンテナのコンテンツは一つ一つ復号化される。この方法による暗号化は、パッケージ全体のディレクトリの構造とファイルの命名を公開する。</p>
<p>OCF は、様々なアルゴリズムを使用できるように、暗号化のフレームワークを提供する XML Encryption [<cite><a class="bibref" href="#bib-xmlenc-core1">XMLENC-CORE1</a></cite>] を使用する。XML Encryption は、任意のデータを暗号化し、結果を XML で表現するための処理を規定している。<a href="#dfn-ocf-abstract-container" class="internalDFN" data-link-type="dfn">OCF 抽象コンテナ</a>は、非 XML データが含まれてもよく、XML Encryption は、OCF 抽象コンテナに含まれるすべてのデータを暗号化するために使用できる。OCF 暗号化は、コンテナ内のファイル全体のみをサポートし、ファイルの一部の暗号化はサポートしない。<code>encryption.xml</code> ファイルは、もし存在するなら、暗号化はしてはならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）。</p>
<p>暗号化データは、OCF 抽象コンテナ内の非暗号化データを置き換える。例えば、<code>photo.jpeg</code> という名前の画像が暗号化されているとき、<code>photo.jpeg</code> リソースのコンテンツは、その暗号化されたコンテンツにより置き換えられるべきである（<em class="rfc2119" title="SHOULD">SHOULD</em>）。ZIP ディレクトリ内では、暗号化されたフィルは、デフレートで圧縮するよりは、むしろ格納するべきである（<em class="rfc2119" title="SHOULD">SHOULD</em>）。</p>
<p id="encryption-obfuscation">状況によっては、"親" の EPUB 出版物に繋ぎ、（例えば、フォントなどを）無制限に使用するための抽出をより困難にするために、<a href="epub-spec.html#dfn-rendition">レンディション</a>によって参照される埋め込みリソースのストレージを難読化する必要があることに注意されたい。難読化は暗号化ではないので、<code>encryption.xml</code> ファイルは、それらを使用する前に、難読化解除に必要なリソースを識別するために <a href="#sec-resource-obfuscation">リソース難読化アルゴリズム</a>と共に使用される。</p>
<p id="encryption-restrictions">以下のファイルは、初期設定か特定の暗号化が求められているかどうかに関わらず暗号化してはならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）：</p>
<ul class="nomark">
<li><code>mimetype</code></li>
<li><code>META-INF/container.xml</code></li>
<li><code>META-INF/encryption.xml</code></li>
<li><code>META-INF/manifest.xml</code></li>
<li><code>META-INF/metadata.xml</code></li>
<li><code>META-INF/rights.xml</code></li>
<li><code>META-INF/signatures.xml</code></li>
<li><a href="epub-spec.html#dfn-package-document"><code>パッケージ ドキュメント</code></a></li>
</ul>
<p>署名済みリソースは、続けて XML 署名復号変換 [<cite><a class="bibref" href="#bib-xmlenc-decrypt">XMLENC-DECRYPT</a></cite>] を使用して暗号化してもよい（<em class="rfc2119" title="MAY">MAY</em>）。この機能は、例えば署名後に暗号化したデータから署名する前に暗号化されたデータを識別する OCF エージェントなどのアプリケーションを可能にする。署名後に暗号化されたデータのみ、署名を検証するために使用する要約を計算する前に複合しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<aside class="example" id="example-5">
<div class="marker"><a class="self-link" href="#example-5">Example 5</a></div>
<p>次の例では、[<cite><a class="bibref" href="#bib-xmlenc-core1">XMLENC-CORE1</a></cite>] の<a href="https://www.w3.org/TR/2002/REC-xmlenc-core-20021210/#sec-eg-Symmetric-Key">セクション 2.2.1</a> から適合したリソース <code>image.jpeg</code> は、対象鍵アルゴリズム (AES) を使用する暗号化と、対象鍵は、ジョン・スミスのキーを持つ非対称鍵アルゴリズム (RSA) を使用してさらに暗号化される。</p>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">encryption</span>
<span class="hljs-attr">xmlns</span> =<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span>
<span class="hljs-attr">xmlns:enc</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#"</span>
<span class="hljs-attr">xmlns:ds</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptedKey</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"EK"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptionMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#rsa-1_5"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ds:KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ds:KeyName</span>&gt;</span>John Smith<span class="hljs-tag">&lt;/<span class="hljs-name">ds:KeyName</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ds:KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherValue</span>&gt;</span>xyzabc<span class="hljs-tag">&lt;/<span class="hljs-name">enc:CipherValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:EncryptedKey</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptedData</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"ED1"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptionMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#kw-aes128"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ds:KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ds:RetrievalMethod</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"#EK"</span>
<span class="hljs-attr">Type</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#EncryptedKey"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ds:KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherReference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"image.jpeg"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:EncryptedData</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">encryption</span>&gt;</span></code></pre>
</aside>
<section id="sec-enc-compression">
<h6 id="x3-5-2-2-1-order-of-compression-and-encryption"><span class="secno">3.5.2.2.1 </span>圧縮と暗号化の順番<a class="self-link" aria-label="§" href="#sec-enc-compression"></a></h6>
<p>ZIP コンテナに格納されているとき、<a href="#dfn-non-codec" class="internalDFN" data-link-type="dfn">非コーデック</a>のコンテンツ タイプであるデータのストリームは、それらが圧縮される前に暗号化されるべきで（<em class="rfc2119" title="SHOULD">SHOULD</em>）、デフレート圧縮が使用されなければならない（<em class="rfc2119" title="MUST">MUST</em>）。この方法は、ZIP コンテナに格納されるファイル エントリが小さなサイズであることを保証する。</p>
<p><a href="#dfn-codec" class="internalDFN" data-link-type="dfn">コーデック</a>のコンテンツ タイプであるデータのストリームは、それらが暗号化される前に圧縮されるべきではない（<em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em>）。このような場合、追加の圧縮は、（特に大きなリソース ファイルを含む）制作時におけるオーバーヘッドの不要な処理を取り込むだろうし、消費時における音声/動画の再生パフォーマンスに影響を与えるであろう。場合によっては、いくつかの暗号化スキームを伴う圧縮の組み合わせは、（例えば、HTTP Content-Length header など）メディアの再生に先んじて完全なリソースの長さを決定することが技術的に不可能なために、（例えば、HTTP byte ranges など）部分的なコンテンツの要求を処理するリーディング システムの能力を損なうかもしれない</p>
<p>暗号化する前に圧縮されたデータのストリームは、次で定義されている <code>Compression</code> XML 要素に従って、初期リソースのサイズ（すなわち、圧縮と暗号化する前）を指定する、追加の <code>EncryptionProperties</code> メタデータを提供するべきである（<em class="rfc2119" title="SHOULD">SHOULD</em>）。暗号化する前に圧縮されていないデータのストリームは、初期リソースのサイズ（すなわち、暗号化する前）を指定する、追加の <code>EncryptionProperties</code> メタデータを提供してもよい（<em class="rfc2119" title="MAY">MAY</em>）。</p>
<dl class="elemdef" id="elemdef-enc-Compression">
<dt>要素名</dt>
<dd>
<p><code>Compression</code></p>
</dd>
<dt>名前空間</dt>
<dd>
<p><code>http://www.idpf.org/2016/encryption#compression</code></p>
</dd>
<dt>使用例</dt>
<dd>
<p>省略可能（<em class="rfc2119" title="OPTIONAL">OPTIONAL</em>）な <code>EncryptionProperty</code> の子。</p>
</dd>
<dt>属性</dt>
<dd>
<dl class="variablelist">
<dt>Method <code>[必須（required）]</code></dt>
<dd>
<p>使用している圧縮方法を識別する。</p>
<p>値は、「<code>0</code>」（非圧縮）かそれとも「<code>8</code>」（デフレート アルゴリズム）である。</p>
</dd>
<dt>OriginalLength <code>[必須（required）]</code></dt>
<dd>
<p>初期リソースのサイズ（バイト数）を表す。</p>
<p>値は、正の整数である。</p>
</dd>
</dl>
</dd>
<dt>コンテンツ モデル</dt>
<dd>
<p>空</p>
</dd>
</dl>
<aside class="example" id="example-6">
<div class="marker"><a class="self-link" href="#example-6">Example 6</a></div>
<p>次の例は、デフレート圧縮され、元のサイズが 3500000 バイトの MP4 ファイルを示している。</p>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">encryption</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptedData</span> <span class="hljs-attr">xmlns:enc</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#"</span>&gt;</span>
        ...
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherReference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"OEPBS/video.mp4"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptionProperties</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptionProperty</span> <span class="hljs-attr">xmlns:ns</span>=<span class="hljs-string">"http://www.idpf.org/2016/encryption#compression"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ns:Compression</span> <span class="hljs-attr">Method</span>=<span class="hljs-string">"8"</span> <span class="hljs-attr">OriginalLength</span>=<span class="hljs-string">"3500000"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:EncryptionProperty</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:EncryptionProperties</span>&gt;</span>
        ...
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:EncryptedData</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">encryption</span>&gt;</span></code></pre>
</aside>
</section>
</section>
<section id="sec-container-metainf-manifest.xml">
<h5 id="x3-5-2-3-manifest-file-manifest-xml"><span class="secno">3.5.2.3 </span>マニフェスト ファイル (<code>manifest.xml</code>)<a class="self-link" aria-label="§" href="#sec-container-metainf-manifest.xml"></a></h5>
<p><code>META-INF</code> ディレクトリの省略可能（<em class="rfc2119" title="OPTIONAL">OPTIONAL</em>）な <code>manifest.xml</code> ファイルは、コンテナ内にあるファイルのマニフェストを提供する。</p>
<p>OCF 仕様は、マニフェストにメタデータ形式を指定しない。</p>
<p><a href="epub-spec.html#dfn-package-document">パッケージ ドキュメント</a>に含まれる <code>manifest</code> 要素は、規定のレンディションを処理するために使用される、ただひとつのマニフェストを識別することに注意されたい。ZIP アーカイブもしくは省略可能（<em class="rfc2119" title="OPTIONAL">OPTIONAL</em>）な <code>manifest.xml</code> に含まれている補助的なマニフェスト情報は、レンディションを処理するために使用してはならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）。</p>
<div class="note" role="note" id="issue-container-generatedID-3">
<div role="heading" class="note-title marker" id="h-note-3" aria-level="6"><span>Note</span></div>
<div class="">この機能は、[<cite><a class="bibref" href="#bib-odf">ODF</a></cite>] との互換性のためだけに存在する。</div>
</div>
</section>
<section id="sec-container-metainf-metadata.xml">
<h5 id="x3-5-2-4-metadata-file-metadata-xml"><span class="secno">3.5.2.4 </span>メタデータ ファイル (<code>metadata.xml</code>)<a class="self-link" aria-label="§" href="#sec-container-metainf-metadata.xml"></a></h5>
<p><code>META-INF</code> ディレクトリに省略可能（<em class="rfc2119" title="OPTIONAL">OPTIONAL</em>）な <code>META-INF/metadata.xml</code> ファイルが、もし存在するなら、コンテナレベルのメタデータのために使用しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<p><code>metadata.xml</code> ファイルが存在するとき、そのコンテンツは、名前空間で装飾された要素 [<cite><a class="bibref" href="#bib-xml-names">XML-NAMES</a></cite>] のみにするべきである（<em class="rfc2119" title="SHOULD">SHOULD</em>）。ファイルは、名前空間 <code>http://www.idpf.org/2013/metadata</code> のルート要素 <code>metadata</code> を含むべきだが（<em class="rfc2119" title="SHOULD">SHOULD</em>）、他のルート要素は、後方互換性のために許可する。リーディング システムは、認識されていないルート要素を持つ <code>metadata.xml</code> ファイルを無視するべきである（<em class="rfc2119" title="SHOULD">SHOULD</em>）。</p>
<p>OCF 仕様のこのバージョンは、<code>metadata.xml</code> ファイルで使用するためのメタデータを定義しない。コンテナ レベルのメタデータは、この仕様の将来のバージョンと EPUB 拡張仕様で定義してもよい（<em class="rfc2119" title="MAY">MAY</em>）。</p>
</section>
<section id="sec-container-metainf-rights.xml">
<h5 id="x3-5-2-5-rights-management-file-rights-xml"><span class="secno">3.5.2.5 </span>著作権管理ファイル (<code>rights.xml</code>)<a class="self-link" aria-label="§" href="#sec-container-metainf-rights.xml"></a></h5>
<p><code>META-INF</code> ディレクトリの省略可能（<em class="rfc2119" title="OPTIONAL">OPTIONAL</em>）な <code>rights.xml</code> ファイルは、権利者、仲介者、そして利用者の間で EPUB 出版物の交換のための信頼できるデジタル著作権管理 (DRM) 情報のために予約されている。</p>
<p>OCF 仕様のこのバージョンでは、DRM 情報に特定の形式を要求しないが、将来のバージョンでは、そうするかもしれない。<code>rights.xml</code> ファイルのコンテンツは、将来の形式との衝突を回避するために、名前空間で装飾された要素 [<cite><a class="bibref" href="#bib-xml-names">XML-NAMES</a></cite>] のみにするべきである（<em class="rfc2119" title="SHOULD">SHOULD</em>）。</p>
<p><code>rights.xml</code> ファイルが存在しないとき、コンテナの何れの部分も、コンテナ レベルで管理される権利はない。権利の表現は、含まれているレンディション内に存在するかもしれない。</p>
<p><code>rights.xml</code> ファイルが存在しない場合、OCF 抽象コンテナのいかなる部分も権利に抑制されない。</p>
</section>
<section id="sec-container-metainf-signatures.xml">
<h5 id="x3-5-2-6-digital-signatures-file-signatures-xml"><span class="secno">3.5.2.6 </span>電子署名ファイル (<code>signatures.xml</code>)<a class="self-link" aria-label="§" href="#sec-container-metainf-signatures.xml"></a></h5>
<div class="note" role="note" id="issue-container-generatedID-4">
<div role="heading" class="note-title marker" id="h-note-4" aria-level="6"><span>Note</span></div>
<div class="">
<p>リーディング システムは、署名をチェックは要求されないので、電子署名を追加することは EPUB が改ざんできないという保証ではない。</p>
</div>
</div>

<p><code>META-INF</code> ディレクトリ内の省略可能（<em class="rfc2119" title="OPTIONAL">OPTIONAL</em>）な <code>signatures.xml</code> ファイルは、コンテナとコンテンツのための電子署名を保持する。このファイルのコンテンツは、<a href="#app-schema-signatures"><code>signatures.xml</code> のスキーマ</a>のスキーマに妥当でなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<p><code>signatures.xml</code> ファイルのルート要素は、<code>signatures</code> 要素である。この要素は、[<cite><a class="bibref" href="#bib-xmldsig-core1">XMLDSIG-CORE1</a></cite>] で定義されているように <code>Signature</code> 型の子要素を含んでいる。署名は、全体または部分的に、EPUB 出版物へ適用でき、（XML だけでなく）あらゆる種類のデータの署名を特定することができる。</p>
<p><code>signatures.xml</code> ファイルが存在しないとき、コンテナのいかなる部分もコンテナ レベルで電子的に署名されていない。電子署名は、<a href="epub-spec.html#dfn-epub-publication">EPUB 出版物</a>内に存在するかもしれない。</p>
<p id="sig-container">データの署名がコンテナのために作られるとき、署名は、<code>signatures</code> 要素の最後の子 <code>Signature</code> 要素として追加されるべきである（<em class="rfc2119" title="SHOULD">SHOULD</em>）。</p>
<div class="note" role="note" id="issue-container-generatedID-5">
<div role="heading" class="note-title marker" id="h-note-5" aria-level="6"><span>Note</span></div>
<div class="">
<p><code>signatures.xml</code> ファイルの各 <code>Signature</code> は、[<cite><a class="bibref" href="#bib-xmldsig-core1">XMLDSIG-CORE1</a></cite>] の <code>Manifest</code> 要素とその <code>Reference</code> サブ要素を使用して、IRI の署名が適用されるデータによって識別される。単一で含まれるファイルは、個々にまたは統合して署名されるかもしれない。個々に署名された各ファイルは、独立して検証できるリソースのダイジェスト値が作られる。このアプローチでは、署名の要素が大きくなってもよい。ファイルが統合して署名されるとき、署名されたファイルのセットは、単一の XML 署名の <code>Manifest</code> 要素のリスト化され、一つ以上の <code>Signature</code> 要素によって参照することができる。</p>
</div>
</div>
<p id="sig-restrictions">コンテナの任意または全てのファイルは、計算された署名情報を含んでいる <code>signatures.xml</code> ファイルを除外して、全体を署名することができる。<code>signatures.xml</code> ファイルを署名するべきか、またその署名方法は、署名者の目的に依存する。</p>
<p>署名者が、署名者の署名を無効にせずにコンテナに署名を追加したり削除したりできるようにしたい場合は、<code>signatures.xml</code> ファイルに署名するべきではない（<em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em>）。</p>
<p>署名者が、署名の任意の追加または削除をしたときに署名者の署名を無効にしたい場合は、[<cite><a class="bibref" href="#bib-xmldsig-core1">XMLDSIG-CORE1</a></cite>] の<a href="https://www.w3.org/TR/2008/REC-xmldsig-core-20080610/#sec-EnvelopedSignature">セクション 6.6.4</a> で定義されている エンベロープ署名変換を作成済みの <code>Signature</code> を除いた全体の既存の署名ファイルに署名するために使用することができる。この変換は、既存の全ての署名を署名できるだろうが、パッケージに後で署名が追加されると無効になる。</p>
<div class="note" role="note" id="issue-container-generatedID-6">
<div role="heading" class="note-title marker" id="h-note-6" aria-level="6"><span>Note</span></div>
<div class="">
<p>署名者が、既存の署名の削除時に署名者の署名を無効にしたいが、署名の追加は許したいとき、既存の署名を署名するのに XPath 変換を使用することができる。しかしながら、このような変換の詳細は、この仕様の範囲外である。</p>
</div>
</div>
<p>[<cite><a class="bibref" href="#bib-xmldsig-core1">XMLDSIG-CORE1</a></cite>] 仕様は、署名に任意のセマンティクスを紐付けないが、エージェントが、例えば、署名を表現する Signature 要素に情報を加えることにより、セマンティクスな情報を包含してもよい。[<cite><a class="bibref" href="#bib-xmldsig-core1">XMLDSIG-CORE1</a></cite>] 仕様は、（例えば、<code>SignatureProperties</code> 要素を使うことによって）追加情報を署名に追加する方法を説明する。</p>
<aside class="example" id="example-7">
<div class="marker"><a class="self-link" href="#example-7">Example 7</a></div>
<p>以下の XML 表現は、<code>signatures.xml</code> フィルの例のコンテンツを示し、[<cite><a class="bibref" href="#bib-xmldsig-core1">XMLDSIG-CORE1</a></cite>] の<a href="https://www.w3.org/TR/2008/REC-xmldsig-core-20080610/#sec-Overview">セクション</a> で見つかるサンプルを基にしている。それはコンテナに、一つの署名を含んでおり、署名は、<code class="filename">EPUB/book.xhtml</code> と <code>EPUB/images/cover.jpeg</code> の二つのリソースに提供される。</p>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">signatures</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Signature</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"sig"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">SignedInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">CanonicalizationMethod</span> 
<span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/TR/2001/REC-xml-c14n-20010315"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">SignatureMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#dsa-sha1"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Reference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"#Manifest1"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#sha1"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestValue</span>&gt;</span>j6lwx3rvEPO0vKtMup4NbeVu8nk=<span class="hljs-tag">&lt;/<span class="hljs-name">DigestValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Reference</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">SignedInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">SignatureValue</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">SignatureValue</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">KeyValue</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DSAKeyValue</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">P</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">P</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Q</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">Q</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">G</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">G</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Y</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">Y</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">DSAKeyValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">KeyValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Object</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Manifest</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"Manifest1"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Reference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"EPUB/book.xhtml"</span>&gt;</span>                    
<span class="hljs-tag">&lt;<span class="hljs-name">Transforms</span>&gt;</span>                                                
<span class="hljs-tag">&lt;<span class="hljs-name">Transform</span>
<span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/TR/2001/REC-xml-c14n-20010315"</span>/&gt;</span>                        
<span class="hljs-tag">&lt;/<span class="hljs-name">Transforms</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#sha1"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestValue</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">DigestValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Reference</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Reference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"EPUB/images/cover.jpeg"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Transforms</span>&gt;</span>                                                
<span class="hljs-tag">&lt;<span class="hljs-name">Transform</span>
<span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/TR/2001/REC-xml-c14n-20010315"</span>/&gt;</span>                        
<span class="hljs-tag">&lt;/<span class="hljs-name">Transforms</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#sha1"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestValue</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">DigestValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Reference</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Manifest</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Object</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Signature</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">signatures</span>&gt;</span></code></pre>
</aside>
</section>
</section>
</section>
</section>
<section id="sec-container-zip">
<!--OddPage-->
<h2 id="x4-ocf-zip-container"><span class="secno">4. </span>OCF ZIP コンテナ<a class="self-link" aria-label="§" href="#sec-container-zip"></a></h2>
<section id="sec-container-zip-intro" class="informative">
<h3 id="x4-1-introduction"><span class="secno">4.1 </span>導入<a class="self-link" aria-label="§" href="#sec-container-zip-intro"></a></h3>
<p><em>このセクションは規定ではない。</em></p>
<p><a href="#dfn-zip-container" class="internalDFN" data-link-type="dfn">OCF ZIP コンテナ</a>は、<a href="#dfn-ocf-abstract-container" class="internalDFN" data-link-type="dfn">OCF 抽象コンテナ</a>の物理的な単一ファイルの明示である。コンテナは、次に使用される。</p>
<ul>
<li>
<p>異なる個人と/または異なる組織の間で作業中の <a href="epub-spec.html#dfn-epub-publication">EPUB 出版物</a>を交換し、</p>
</li>
<li>
<p>流通や販売チャンネルに出版社や変換業者（conversion house）から EPUB 出版物を提供し、そして、</p>
</li>
<li>
<p><a href="epub-spec.html#dfn-epub-reading-system">EPUB リーディング システム</a>やユーザーに EPUB 出版物を配信するため。</p>
</li>
</ul>
</section>
<section id="sec-zip-container-zipreqs">
<h3 id="x4-2-zip-file-requirements"><span class="secno">4.2 </span>ZIP ファイルの要件<a class="self-link" aria-label="§" href="#sec-zip-container-zipreqs"></a></h3>
<p><a href="#dfn-zip-container" class="internalDFN" data-link-type="dfn">OCF ZIP コンテナ</a>は、[<cite><a class="bibref" href="#bib-zip">ZIP</a></cite>] によって規定されているような ZIP 形式を使用するが、以下の制約と説明に従う：</p>
<ul class="conformance-list">
<li>
<p id="confreq-zip-abstr"><span class="link-marker"><a href="#confreq-zip-abstr" class="hidden-reveal"><span>&nbsp;</span></a> </span>OCF ZIPコンテナのコンテンツは、<a href="#sec-container-abstract">OCF 抽象コンテナ</a>に一致しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
<li>
<p id="confreq-zip-mult"><span class="link-marker"><a href="#confreq-zip-mult" class="hidden-reveal"><span>&nbsp;</span></a> </span>OCF ZIP コンテナは、ZIP ファイルが複数の記憶媒体に横断又は複数のファイルに分割されることを可能にする ZIP アプリケーション ノート [<cite><a class="bibref" href="#bib-zip">ZIP</a></cite>] の機能を使用してはならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）。<a href="#dfn-ocf-processor">OCF プロセッサ</a>は、複数のストレージメディアを横断するよう分割している ZIP ファイルであることが明らかな任意の OCF ファイルをエラーとして処理しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
<li>
<p id="confreq-zip-comp"><span class="link-marker"><a href="#confreq-zip-comp" class="hidden-reveal"><span>&nbsp;</span></a> </span>OCF ZIP コンテナは、ZIP アーカイブに（未圧縮で）格納またはデフレート圧縮した ZIP エントリーのみ包含しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。OCF プロセッサは、デフレート以外の圧縮技術を使用している任意の OCF コンテナをエラーとして処理しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
<li>
<p id="confreq-zip-64"><span class="link-marker"><a href="#confreq-zip-64" class="hidden-reveal"><span>&nbsp;</span></a> </span>OCF ZIP コンテナは、アプリケーションノート [<cite><a class="bibref" href="#bib-zip">ZIP</a></cite>] のサブセクション G に、セクション V の「Version 1」として定義されている ZIP64 拡張を使用してもよく（<em class="rfc2119" title="MAY">MAY</em>）、コンテンツがそれらを要求するとき、それらの拡張のみ使用するべきである（<em class="rfc2119" title="SHOULD">SHOULD</em>）。OCF プロセッサは、「Version 1」として定義されている ZIP64 拡張をサポートしなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
<li>
<p id="confreq-zip-enc"><span class="link-marker"><a href="#confreq-zip-enc" class="hidden-reveal"><span>&nbsp;</span></a> </span>OCF ZIP コンテナは、ZIP フォーマットにより定義された暗号化機能を使用してはならず（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）、代わりに、暗号化は、<a href="#sec-container-metainf-encryption.xml">暗号化ファイル (<code>encryption.xml</code>)</a> で説明されている機能を使用しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。OCF プロセッサは、ZIP 暗号化機能を使用している OCF ZIP コンテナをエラーとして処理しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
<li>
<p id="confreq-zip-preserve"><span class="link-marker"><a href="#confreq-zip-preserve" class="hidden-reveal"><span>&nbsp;</span></a> </span>OCF プロセッサは、OCF 抽象コンテナで定義されていない読み込みと保存の操作を通じて OCF ZIP コンテナからの情報を保つことを要求しない。具体的には、OCF プロセッサは、特定のオペレーティングシステム（例えば、<em class="firstterm">External file attributes</em> と <em class="firstterm">Extra field</em> など）に対応するファイルシステム情報を保持する CRC 値、コメントフィールド、フィールドを保存しない。</p>
</li>
<li>
<p id="confreq-zip-utf8"><span class="link-marker"><a href="#confreq-zip-utf8" class="hidden-reveal"><span>&nbsp;</span></a> </span>OCF ZIP コンテナは、UTF-8 [<cite><a class="bibref" href="#bib-unicode">Unicode</a></cite>] を使用してファイル システム名をエンコードしなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
</ul>
<p>以下の制約は、OCF ZIP コンテナ アーカイブ内の特定のフィールドに適用する：</p>
<ul class="conformance-list">
<li>
<p id="confreq-zip-fld-version"><span class="link-marker"><a href="#confreq-zip-fld-version" class="hidden-reveal"><span>&nbsp;</span></a> </span>ローカル ファイル ヘッダ テーブルでは、OCF ZIP コンテナは、特定のファイルにより必要とされる最大バージョンレベルに合わせるために、<code class="literal">version needed to extract</code> フィールドの値を <code>10</code> 、<code>20</code> 、<code>45</code> に設定しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。（例えば、デフレートが必要な場合は <code>20</code> 、ZIP64 が必要な場合は <code>45</code> ）。OCF プロセッサは、他の任意の値をエラーとして処理しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
<li>
<p id="confreq-zip-fld-comp"><span class="link-marker"><a href="#confreq-zip-fld-comp" class="hidden-reveal"><span>&nbsp;</span></a> </span>ローカルファイルヘッダーテーブルでは、OCF ZIP コンテナは <code class="literal">compression</code> メソッドフィールドの値を <code>0</code> か <code>8</code> に設定しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。OCF プロセッサは、他の任意の値をエラーとして処理しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
<li>
<p id="confreq-zip-fld-er"><span class="link-marker"><a href="#confreq-zip-fld-er" class="hidden-reveal"><span>&nbsp;</span></a> </span>OCF プロセッサは、<code>Archive decryption header</code> または <code>Archive extra data record</code> を持つ OCF ZIP コンテナをエラーとして処理しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
</li>
</ul>
</section>
<section id="sec-zip-container-mime">
<h3 id="x4-3-ocf-zip-container-media-type-identification"><span class="secno">4.3 </span>OCF ZIP コンテナのメディア タイプの識別<a class="self-link" aria-label="§" href="#sec-zip-container-mime"></a></h3>
<p><a href="#dfn-zip-container" class="internalDFN" data-link-type="dfn">OCF ZIP コンテナ</a> の最初のファイルは、次の要件を満たす <code>mimetype</code> ファイルでなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<ul>
<li><code>mimetype</code> のコンテンツは、US-ASCII [<cite><a class="bibref" href="#bib-us-ascii">US-ASCII</a></cite>] でエンコードされた <code>application/epub+zip</code> 文字列の MIME メディア タイプ [<cite><a class="bibref" href="#bib-rfc2046">RFC2046</a></cite>] でなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</li>
<li><code>mimetype</code> ファイルは、いかなる先頭または末尾の余白および空白を含んではならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）。</li>
<li><code>mimetype</code> ファイルは、ユニコードのバイト オーダー マーク U+FEFF で開始してはならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）。</li>
<li><code>mimetype</code> ファイルは、圧縮または暗号化をしてはならず（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）、そして ZIP ヘッダにエキストラ フィールドがあってはならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）。</li>
</ul>
<div class="note" role="note" id="issue-container-generatedID-7">
<div role="heading" class="note-title marker" id="h-note-7" aria-level="4"><span>Note</span></div>
<div class="">
<p><code>application/epub+zip</code> メディア タイプについてのより詳細な情報は、<a href="#app-media-type">補足&nbsp;C の <em><code>application/epub+zip</code> メディア タイプ</em></a>を参照されたい。</p>
</div>
</div>
</section>
</section>
<section id="sec-resource-obfuscation" class="informative">
<!--OddPage-->
<h2 id="x5-resource-obfuscation"><span class="secno">5. </span>リソース難読化<a class="self-link" aria-label="§" href="#sec-resource-obfuscation"></a></h2>
<section id="fobfus-intro" class="informative">
<h3 id="x5-1-introduction"><span class="secno">5.1 </span>導入<a class="self-link" aria-label="§" href="#fobfus-intro"></a></h3>
<p><em>このセクションは規定ではない。</em></p>
<p><a href="#dfn-zip-container" class="internalDFN" data-link-type="dfn">OCF ZIP コンテナ</a>は、基本的に ZIP ファイルなので、一般的に入手可能な ZIP ツールを、パッケージから任意の非暗号化したコンテンツストリームを抽出するのに使用できる。また、ZIP ファイルの性質は、その内容が一部のシステム上の任意の他のネイティブコンテナ（例えば、フォルダなど）に表示されるかもしれないことを意味する。</p>
<p>この ZIP ファイルの単純さは非常に便利だが、それはまたリソースを抽出する容易さは、暗号化していないリソースの予期しない副作用の問題を引き起こす。サードパーティ製フォントの包含したい<a href="epub-spec.html#dfn-author">製作者</a>は、例えば、典型的にフォントが他人によって抽出され再利用されるのを望まない。より重要なことは、多くの商業フォントは埋め込みを許可しているが、フォントの埋め込むことは、単にコンテンツと一緒にオリジナルのフォントファイルを提供せず、出版物の重要な部分を形成していることを意味する。</p>
<p>統合された ZIP のサポートは、モダンなオペレーティング システムに偏在しおり、ZIP アーカイブ内に単純に配置したフォントは、他のコンテクストで再利用されることは意図しないフォントであることを意味するには不十分である。この不確定要素は、他の非常に便利な EPUB 出版物のフォント埋め込みの機能を弱めることができる。</p>
<p>フォントの再利用を防ぐために、多くのフォント ベンダーは、もしそれらのフォントが、出版物に何らかの方法で固定化されている場合、EPUB 出版物内のこれらのフォントの使用のみ許可するかもしれない。フォント ファイルが、コンピュータデバイスの組み込みツールを使ってオペレーショング システム上で使用するため直接インストールできないならば、他の EPUB 出版物によって直接使用することはできない。</p>
<p>そのようなリソースのためのデジタル著作権管理や施工システムを提供することはこの仕様の範囲を超える。このセクションは、任意の難読化したリソースへの一般的なアクセスを得るための最終的な OCF 受容者側の追加の作業として必要になる難読化の方法を定義する。</p>
<p>この仕様によって作られた要求ではなく、これが暗号化を構成するわけでも、リソースが著作権侵害から安全であることを保証するわけでもないことに注意されたい。しかしながら、このアルゴリズムが、コンテナを解凍することによってそれらのリソースを簡単に抽出できないようにするいくつかの保証を求める多くのベンダーの要求を満たすであろうというのが期待である。</p>
<p>フォントの場合、暗号化のための主要なユースケースは、定義されたメカニズムは、ライセンスの詳細に気付いていない人に障害を提供する。これは、フォントへの完全なアクセスを得ようと考えているユーザーは防げないだろう。OCF コンテナが提供されると、RAW フォントファイルを抽出するために定義したアルゴリズムを適応することが可能である。難読化のこの方法は、個々のフォント ライセンスの要件を満たすかどうかに関わらず、使用許諾者や被許諾者の課題が残る。</p>
</section>
<section id="obfus-keygen">
<h3 id="x5-2-obfuscation-key"><span class="secno">5.2 </span>難読化キー<a class="self-link" aria-label="§" href="#obfus-keygen"></a></h3>
<p>難読化アルゴリズムに用いられるキーは、<a href="#dfn-default-rendition">初期設定のレンディション</a>の<a href="epub-spec.html#dfn-unique-identifier">一意識別子</a>から得られる。</p>
<p><a href="https://www.w3.org/TR/2008/REC-xml-20081126/#sec-common-syn">XML 1.0 仕様書のセクション 2.3</a> [<cite><a class="bibref" href="#bib-xml">XML</a></cite>] によって定義されている、全ての空白文字、具体的には Unicode コードポイント <code>U+0020</code> 、<code>U+0009</code>、<code>U+000D</code> と <code>U+000A</code> は、この識別子から削除されなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<p>結果として生じる文字列の UTF-8 表現の SHA-1 ダイジェストは、Secure Hash Standard [<cite><a class="bibref" href="#bib-fips-180-4">FIPS-180-4</a></cite>] で規定されているように生成するべきである（<em class="rfc2119" title="SHOULD">SHOULD</em>）。このダイジェストは、その後、アルゴリズムのためのキーとして直接使用される。</p>
</section>
<section id="obfus-algorithm">
<h3 id="x5-3-obfuscation-algorithm"><span class="secno">5.3 </span>難読化アルゴリズム<a class="self-link" aria-label="§" href="#obfus-algorithm"></a></h3>
<p>アルゴリズムは、リソースを難読化するために、ファイルの最初の 1,040 バイト (~1KB) の変更から成る。万一、ファイルが 1,040 バイト に満たない場合、ファイル全体が変更される。</p>
<p>元データを難読化するのに、RAW ファイルの最初のバイトと<a href="#obfus-keygen">難読化キー</a>の最初のバイトの排他的論理和（XOR）の計算の結果は、埋め込まれたリソースの最初のバイトとして格納される。</p>
<p>この処理は、ソースとキーの次のバイトで繰り返され、キー内の全てのバイトが使用されるまで続く。ここで、キーの最初のバイトとソースの 21 バイト目から処理が始まり継続する。1,040 バイトがこの方法で（またはソースの終わりに到達して）エンコードされたら、ソース内の残りのデータは、格納先に直接コピーされる。</p>
<p>リソースの難読化は、それらが圧縮または OCF コンテナに追加される前に生じなければならない（<em class="rfc2119" title="MUST">MUST</em>）。難読化は暗号化ではなく、この要件は、それらを暗号化する前にリソースを圧縮する <a href="#sec-container-metainf-encryption.xml">暗号化ファイル (<code>encryption.xml</code>)</a>のひとつに違反しないことに注意されたい。</p>
<aside class="example" id="example-8">
<div class="marker"><a class="self-link" href="#example-8">Example 8</a></div>
<p>次の擬似コードは、難読化アルゴリズムを示している。</p>
<pre class="programlisting" aria-busy="false"><code class="hljs">set ocf to OCF container file
set source to file
set destination to obfuscated file
set keyData to key for file
set outer to 0
while outer &lt; 52 and not (source at EOF)
    set inner to 0
    while inner &lt; 20 and not (source at EOF)
        read 1 byte from source     //Assumes read advances file position
        set sourceByte to result of read
        set keyByte to byte inner of keyData
        set obfuscatedByte to (sourceByte XOR keyByte)
        write obfuscatedByte to destination
        increment inner
    end while
    increment outer
end while
if not (source at EOF) then
    read source to EOF
    write result of read to destination
end if
Deflate destination
store destination as source in ocf</code></pre>
</aside>
<p>元のフォントデータを得るには、処理は単純に逆になり、ソースファイルは、難読化データと RAW データが格納されている格納先のファイルからなる。</p>
<div class="note" role="note" id="issue-container-generatedID-8">
<div role="heading" class="note-title marker" id="h-note-8" aria-level="4"><span>Note</span></div>
<div class="">
<p>フォントの難読化は、EPUB 3.0.1 で先行して許可されるが、難読化と圧縮の順序は指定しない。その結果、無効なフォントは、圧縮解除と難読化解除の後に遭遇するであろう。このような場合、伸張する前の難読化解除データは、妥当なフォントを返すかもしれない。この仕様のこのバージョンで対応していないので、この仕様は、この復旧方法のサポートを要求しないが、一般的には EPUB 3 コンテンツをサポートするときに考慮する必要がある。</p>
</div>
</div>
</section>
<section id="obfus-specifying">
<h3 id="x5-4-specifying-obfuscated-resources"><span class="secno">5.4 </span>難読化されたリソースの指定<a class="self-link" aria-label="§" href="#obfus-specifying"></a></h3>
<p>すべての難読化リソースは、技術的には暗号化データではないけれど、EPUB 出版物に添付する <code class="filename">encryption.xml</code> ファイル（<a href="#sec-container-metainf-encryption.xml">暗号化ファイル (<code>encryption.xml</code>)</a>を参照）に記入しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<p><code>EncryptedData</code> 要素は、各難読化リソースのために包含されなければならない（<em class="rfc2119" title="MUST">MUST</em>）。各 <code>EncryptedData</code> 要素は、値に <code>http://www.idpf.org/2008/embedding</code> を設定された <code>Algorithm</code> 属性を <code>EncryptionMethod</code> 要素の子に包含しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。この属性の存在は、本仕様書に記載されているアルゴリズムの使用を示している。難読化リソースへのパスは、<code>CipherData</code> 要素の子の <code>CipherReference</code> に記載しなければならない（<em class="rfc2119" title="MUST">MUST</em>）。</p>
<aside class="example" id="example-9">
<div class="marker"><a class="self-link" href="#example-9">Example 9</a></div>
<p>次の例は、<code>encryption.xml</code> ファイル内の難読化フォントのためのエントリーを示している。</p>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">encryption</span> 
<span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span> 
<span class="hljs-attr">xmlns:enc</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptedData</span>&gt;</span> 
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptionMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.idpf.org/2008/embedding"</span>/&gt;</span> 
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherData</span>&gt;</span> 
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherReference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"EPUB/Fonts/BKANT.TTF"</span>/&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:CipherData</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:EncryptedData</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">encryption</span>&gt;</span></code></pre>
</aside>
<p>他の EPUB 出版物へ埋め込みリソースのささいな複製を防ぐために、<a href="#obfus-keygen">難読化キー</a>を、<code>encryption.xml</code> ファイルに提供してはならない（<em class="rfc2119" title="MUST NOT">MUST NOT</em>）。</p>
</section>
</section>
<section class="appendix" id="app-schemas">
<!--OddPage-->
<h2 id="a-schemas"><span class="secno">A. </span>スキーマ<a class="self-link" aria-label="§" href="#app-schemas"></a></h2>
<section id="app-schema-container">
<h3 id="a-1-schema-for-container-xml"><span class="secno">A.1 </span><code>container.xml</code> のスキーマ<a class="self-link" aria-label="§" href="#app-schema-container"></a></h3>
<p><code>container.xml</code> ファイルのスキーマは、<a href="https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/ocf-container-30.nvdl"><code>https://github.com/w3c/epubcheck/tree/master/src/main/resources/com/adobe/epubcheck/schema/30/ocf-container-30.nvdl</code></a> が利用可能である。</p>
<p>このスキーマを使用する検証は [<cite><a class="bibref" href="#bib-relaxng-schema">RelaxNG-Schema</a></cite>] と [<cite><a class="bibref" href="#bib-xmlschema-2">XMLSCHEMA-2</a></cite>] をサポートするプロセッサが必要になる。</p>
</section>
<section id="app-schema-encryption">
<h3 id="a-2-schema-for-encryption-xml"><span class="secno">A.2 </span><code>encryption.xml</code> のスキーマ<a class="self-link" aria-label="§" href="#app-schema-encryption"></a></h3>
<p><code>encryption.xml</code> ファイルのスキーマは、[<cite><a class="bibref" href="#bib-xmlsec-rngschema-20130411">XMLSEC-RNGSCHEMA-20130411</a></cite>] に包含されている。</p>
</section>
<section id="app-schema-signatures">
<h3 id="a-3-schema-for-signatures-xml"><span class="secno">A.3 </span><code>signatures.xml</code> のスキーマ<a class="self-link" aria-label="§" href="#app-schema-signatures"></a></h3>
<p><code>signatures.xml</code> ファイルのスキーマは、[<cite><a class="bibref" href="#bib-xmlsec-rngschema-20130411">XMLSEC-RNGSCHEMA-20130411</a></cite>] に包含されている。</p>
</section>
</section>
<section class="appendix informative" id="example">
<!--OddPage-->
<h2 id="b-example"><span class="secno">B. </span>例<a class="self-link" aria-label="§" href="#example"></a></h2>
<p><em>このセクションは規定ではない。</em></p>
<p>次の例は、<a href="#dfn-zip-container" class="internalDFN" data-link-type="dfn">OCF ZIP コンテナ</a>内の署名と暗号化された EPUB 出版物を含むための、OCF フォーマットを使用した実例である。</p>
<aside class="example" id="example-10">
<div class="marker"><a class="self-link" href="#example-10">Example 10</a></div>
<p>OCF ZIP コンテナ内ファイルのソートしたリスト</p>
<pre aria-busy="false"><code class="hljs">mimetype
META-INF/container.xml
META-INF/signatures.xml
META-INF/encryption.xml
EPUB/As_You_Like_It.opf
EPUB/book.html
EPUB/nav.html
EPUB/images/cover.png</code></pre>
</aside>
<aside class="example" id="example-11">
<div class="marker"><a class="self-link" href="#example-11">Example 11</a></div>
<p><code>mimetype</code> ファイルの内容</p>
<pre aria-busy="false"><code class="hljs">application/epub+zip</code></pre>
</aside>
<aside class="example" id="example-12">
<div class="marker"><a class="self-link" href="#example-12">Example 12</a></div>
<p><code>META-INF/container.xml</code> ファイルの内容</p>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.0"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">rootfiles</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">rootfile</span> <span class="hljs-attr">full-path</span>=<span class="hljs-string">"EPUB/As_You_Like_It.opf"</span>
<span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/oebps-package+xml"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">rootfiles</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span></code></pre>
</aside>
<aside class="example" id="example-13">
<div class="marker"><a class="self-link" href="#example-13">Example 13</a></div>
<p><code>META-INF/signatures.xml</code> ファイルの内容</p>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">signatures</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Signature</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"AsYouLikeItSignature"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#"</span>&gt;</span>
        
<span class="hljs-comment">&lt;!--
             SignedInfo is the information that is actually signed.
             In this case, the SHA-1 algorithm is used to sign the 
             canonical form of the XML documents enumerated in the
             Object element below.
        --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">SignedInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">CanonicalizationMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/TR/2001/REC-xml-c14n-20010315"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">SignatureMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#dsa-sha1"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Reference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"#AsYouLikeIt"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#sha1"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestValue</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">DigestValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Reference</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">SignedInfo</span>&gt;</span>
        
<span class="hljs-comment">&lt;!--
             The signed value of the digest above, using the DSA 
             algorithm
        --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">SignatureValue</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">SignatureValue</span>&gt;</span>
        
<span class="hljs-comment">&lt;!--
             The key used to validate the signature
        --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">KeyValue</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DSAKeyValue</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">P</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">P</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Q</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">Q</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">G</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">G</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Y</span>&gt;</span>…<span class="hljs-tag">&lt;/<span class="hljs-name">Y</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">DSAKeyValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">KeyValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">KeyInfo</span>&gt;</span>
        
<span class="hljs-comment">&lt;!--
             The list of resources to sign (note that the canonical
             form of XML documents is signed, while the binary form
             of all other resources is used)
        --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Object</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Manifest</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"AsYouLikeIt"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Reference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"EPUB/As_You_Like_It.opf"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Transforms</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Transform</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/TR/2001/REC-xml-c14n-20010315"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Transforms</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#sha1"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestValue</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">DigestValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Reference</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Reference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"EPUB/book.html"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Transforms</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Transform</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/TR/2001/REC-xml-c14n-20010315"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Transforms</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#sha1"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestValue</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">DigestValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Reference</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Reference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"EPUB/images/cover.png"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#sha1"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">DigestValue</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">DigestValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Reference</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Manifest</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Object</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Signature</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">signatures</span>&gt;</span></code></pre>
</aside>
<aside class="example" id="example-14">
<div class="marker"><a class="self-link" href="#example-14">Example 14</a></div>
<p><code>META-INF/encryption.xml</code> ファイルの内容</p>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">encryption</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span>
<span class="hljs-attr">xmlns:enc</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#"</span> <span class="hljs-attr">xmlns:ds</span>=<span class="hljs-string">"http://www.w3.org/2000/09/xmldsig#"</span>&gt;</span>

<span class="hljs-comment">&lt;!--
         The RSA-encrypted AES-128 symmetric key used to encrypt
         data enumerated in EncryptedData blocks below
    --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptedKey</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"EK"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptionMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#rsa-1_5"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ds:KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ds:KeyName</span>&gt;</span>John Smith<span class="hljs-tag">&lt;/<span class="hljs-name">ds:KeyName</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ds:KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherValue</span>&gt;</span>xyzabc…<span class="hljs-tag">&lt;/<span class="hljs-name">enc:CipherValue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:EncryptedKey</span>&gt;</span>

<span class="hljs-comment">&lt;!--
         Each EncryptedData block identifies a single resource
         that has been encrypted using the AES-128 algorithm.
         The data remains stored, in its encrypted form, in the
         original file within the container.
    --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptedData</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"ED1"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptionMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#kw-aes128"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ds:KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ds:RetrievalMethod</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"#EK"</span> <span class="hljs-attr">Type</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#EncryptedKey"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ds:KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherReference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"EPUB/book.html"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:EncryptedData</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptedData</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"ED2"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:EncryptionMethod</span> <span class="hljs-attr">Algorithm</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#kw-aes128"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ds:KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ds:RetrievalMethod</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"#EK"</span> <span class="hljs-attr">Type</span>=<span class="hljs-string">"http://www.w3.org/2001/04/xmlenc#EncryptedKey"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ds:KeyInfo</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">enc:CipherReference</span> <span class="hljs-attr">URI</span>=<span class="hljs-string">"EPUB/images/cover.png"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:CipherData</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">enc:EncryptedData</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">encryption</span>&gt;</span></code></pre>
</aside>
<aside class="example" id="example-15">
<div class="marker"><a class="self-link" href="#example-15">Example 15</a></div>
<p><code>EPUB/As_You_Like_It.opf</code> ファイルの内容</p>
<pre aria-busy="false"><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"3.0"</span>
<span class="hljs-attr">xml:lang</span>=<span class="hljs-string">"en"</span>
<span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.idpf.org/2007/opf"</span>
<span class="hljs-attr">unique-identifier</span>=<span class="hljs-string">"pub-id"</span>&gt;</span>
    
<span class="hljs-tag">&lt;<span class="hljs-name">metadata</span> <span class="hljs-attr">xmlns:dc</span>=<span class="hljs-string">"http://purl.org/dc/elements/1.1/"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dc:identifier</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"pub-id"</span>&gt;</span>urn:uuid:B9B412F2-CAAD-4A44-B91F-A375068478A0<span class="hljs-tag">&lt;/<span class="hljs-name">dc:identifier</span>&gt;</span>
        
<span class="hljs-tag">&lt;<span class="hljs-name">dc:language</span>&gt;</span>en<span class="hljs-tag">&lt;/<span class="hljs-name">dc:language</span>&gt;</span>
        
<span class="hljs-tag">&lt;<span class="hljs-name">dc:title</span>&gt;</span>As You Like It<span class="hljs-tag">&lt;/<span class="hljs-name">dc:title</span>&gt;</span>
        
<span class="hljs-tag">&lt;<span class="hljs-name">dc:creator</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"creator"</span>&gt;</span>William Shakespeare<span class="hljs-tag">&lt;/<span class="hljs-name">dc:creator</span>&gt;</span>
        
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"dcterms:modified"</span>&gt;</span>2000-03-24T00:00:00Z<span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span>
        
<span class="hljs-tag">&lt;<span class="hljs-name">dc:publisher</span>&gt;</span>Project Gutenberg<span class="hljs-tag">&lt;/<span class="hljs-name">dc:publisher</span>&gt;</span>
        
<span class="hljs-tag">&lt;<span class="hljs-name">dc:date</span>&gt;</span>2000-03-24<span class="hljs-tag">&lt;/<span class="hljs-name">dc:date</span>&gt;</span>
        
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"dcterms:dateCopyrighted"</span>&gt;</span>9999-01-01<span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span>
        
<span class="hljs-tag">&lt;<span class="hljs-name">dc:identifier</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"isbn13"</span>&gt;</span>urn:isbn:9780741014559<span class="hljs-tag">&lt;/<span class="hljs-name">dc:identifier</span>&gt;</span>
        
<span class="hljs-tag">&lt;<span class="hljs-name">dc:identifier</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"isbn10"</span>&gt;</span>0-7410-1455-6<span class="hljs-tag">&lt;/<span class="hljs-name">dc:identifier</span>&gt;</span>
        
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"xml-signature"</span>
<span class="hljs-attr">href</span>=<span class="hljs-string">"../META-INF/signatures.xml#AsYouLikeItSignature"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">metadata</span>&gt;</span>
    
<span class="hljs-tag">&lt;<span class="hljs-name">manifest</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"r4915"</span> 
<span class="hljs-attr">href</span>=<span class="hljs-string">"book.html"</span> 
<span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"r7184"</span> 
<span class="hljs-attr">href</span>=<span class="hljs-string">"images/cover.png"</span> 
<span class="hljs-attr">media-type</span>=<span class="hljs-string">"image/png"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nav"</span> 
<span class="hljs-attr">href</span>=<span class="hljs-string">"nav.html"</span> 
<span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span> 
<span class="hljs-attr">properties</span>=<span class="hljs-string">"nav"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span>
    
<span class="hljs-tag">&lt;<span class="hljs-name">spine</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">itemref</span> <span class="hljs-attr">idref</span>=<span class="hljs-string">"r4915"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">spine</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">package</span>&gt;</span></code></pre>
</aside>
</section>
<section class="appendix informative" id="app-media-type">
<!--OddPage-->
<h2 id="c-the-application-epub-zip-media-type"><span class="secno">C. </span><code>application/epub+zip</code> メディア タイプ<a class="self-link" aria-label="§" href="#app-media-type"></a></h2>
<p><em>このセクションは規定ではない。</em></p>
<p>この補足は、EPUB Open Container Format (OCF) のメディアタイプ <code>application/epub+zip</code> を登録している。</p>
<p><a href="#dfn-zip-container" class="internalDFN" data-link-type="dfn">OCF ZIP コンテナ</a> 又は <a href="epub-spec.html#dfn-epub-container">EPUB コンテナ</a> は、[<cite><a class="bibref" href="#bib-zip">ZIP</a></cite>] アーカイブ形式に基づくコンテナの技術である。それは、EPUB 出版物のレンディションをカプセルに包むために使用する。OCF とその関連規格は、World Wide Web Consortium (W3C) によって維持・定義される。</p>
<dl class="variablelist">
<dt>MIME メディアタイプ名：</dt>
<dd>
<p><code>application</code></p>
</dd>
<dt>MIME サブタイプ名：</dt>
<dd>
<p><code>epub+zip</code></p>
</dd>
<dt>必要なパラメータ：</dt>
<dd>
<p>なし。</p>
</dd>
<dt>任意のパラメータ：</dt>
<dd>
<p>なし。</p>
</dd>
<dt>エンコードの考慮：</dt>
<dd>
<p>OCF ZIP コンテナ ファイルは、<a class="media-type" href="https://www.iana.org/assignments/media-types/application/zip"> <code>application/zip</code></a> メディア タイプでエンコードされる。</p>
</dd>
<dt>セキュリティの考慮：</dt>
<dd>
<p>OCF ZIP コンテナ ファイルを読む全てのプロセッサは、検索されたデータのサイズと妥当性を厳密にチェックするべきである。</p>
<p>さらに、OCF ZIP コンテナ ファイルに埋め込むことのできる様々なコンテンツタイプのために、<code>application/epub+zip</code> が、ここに注記されたものを超えてセキュリティについての暗黙の姿勢でコンテンツを説明してもよい。しかしながら、プロセッサが、追加コンテンツまたは他のプロセッサによって送られるコンテツの処理を認識・処理するばあいには、セキュリティの問題は潜在的に生じる。またその場合、それらは、この登録ドキュメントの範囲から外れるであろう。</p>
<p><code>application/zip</code> に適用されるセキュリティの考慮は、OCF ZIP コンテナ ファイルにも適用される。</p>
</dd>
<dt>相互運用性の考慮：</dt>
<dd>
<p>なし。</p>
</dd>
<dt>発行されている仕様書：</dt>
<dd>
<p>このメディアタイプの登録は、<a href="https://w3c.github.io/publ-epub-revision/epub32/spec/epub-ocf.html"><code>https://w3c.github.io/publ-epub-revision/epub32/spec/epub-ocf.html</code></a> にある EPUB Open Container Format (OCF) 3.2 仕様書で説明されている EPUB Open Container Format (OCF) のためのものである。</p>
<p>EPUB OCF 3.2 仕様書は、<a href="https://tools.ietf.org/html/rfc4839">RFC 4839</a> 及び <a href="https://www.idpf.org/doc_library/epub/ocf_2.0.1_draft.doc"><code>https://www.idpf.org/doc_library/epub/ocf_2.0.1_draft.doc</code></a> の両方にあり、<code>application/epub+zip</code> メディアタイプとして使用する Open Container Format 2.0.1 仕様書に優先する。</p>
</dd>
<dt>このメディアタイプを使用するアプリケーション：</dt>
<dd>
<p>このメディアタイプは、EPUB 形式の電子書籍の配布のために広く使われている。以下のアプリケーションのリストは、完全ではない。</p>
<ul>
<li>Adobe Digital Editions</li>
<li>Aldiko</li>
<li>Azardi</li>
<li>Apple iBooks</li>
<li>Barnes &amp; Noble NOOK</li>
<li>Bluefire Reader</li>
<li>Calibre</li>
<li>Google Play Books</li>
<li>Kobo</li>
<li>Microsoft Edge</li>
<li>Readium</li>
</ul>
</dd>
<dt>追加情報：</dt>
<dd>
<dl class="variablelist">
<dt>マジックナンバー：</dt>
<dd>
<p>0: <code>PK 0x03 0x04</code> , 30: <code>mimetype</code> , 38: <code>application/epub+zip</code></p>
</dd>
<dt>ファイル拡張子：</dt>
<dd>
<p>OCF ZIP コンテナ ファイルは、ほとんどの場合、<code>.epub</code> の拡張として識別される。</p>
</dd>
<dt>Macintosh ファイルタイプコード：</dt>
<dd>
<p>ZIP</p>
</dd>
<dt>フラグメント識別子：</dt>
<dd>
<p>IDPF は、<a href="https://www.idpf.org/epub/linking/"><code>https://www.idpf.org/epub/linking/</code></a> でリンクしているスキームの登録を維持する。このスキームの一部は、<code>application/epub+zip</code> と <code>application/oebps-package+xml</code> 文書を解決するカスタムフラグメント識別子を定義している。</p>
</dd>
</dl>
</dd>
<dt>詳細についての連絡先とメールアドレス：</dt>
<dd>
<p>public-epub3@w3.org</p>
</dd>
<dt>用途：</dt>
<dd>
<p>COMMON</p>
</dd>
<dt>著者/改訂管理：</dt>
<dd>
<p>発行された仕様は、World Wide Web Consortium（W3C）のEPUB 3 コミュニティ グループの作業成果物である。 W3C は、この仕様を変更することができる。</p>
</dd>
</dl>
</section>
<section id="app-contributors" class="acknowledgements informative">
<!--OddPage-->
<h2 id="d-acknowledgements-and-contributors"><span class="secno">D. </span>謝辞と貢献者<a class="self-link" aria-label="§" href="#app-contributors"></a></h2>
<p><em>このセクションは規定ではない。</em></p>

<p>EPUB 3 は<a href="https://www.w3.org/community/publishingbg/">Publishing Business Group</a> と連携して、W3C の <a href="https://www.w3.org/community/epub3/">EPUB 3 Community Group</a> によって開発された。</p>

<p>EPUB 3.2 リビジョンは、以下の人によって導かれた。</p>

<ul>
<li>Rachel Comerford (Macmillan Higher Education), Chair</li>
<li>Dave Cramer (Hachette Livre), Chair</li>
</ul>

<p>編集者に加えて、この EPUB のバージョンは以下の方々の多大な貢献なしには不可能だったであろう。</p>
	
<ul>
<li>Aaron Troia</li>
<li>Adam Sobieski</li>
<li>Alberto Pettarin</li>
<li>Andrew Gribben (Houghton Mifflin Harcourt)</li>
<li>Avneesh Singh (DAISY Consortium)</li>
<li>Ben Walters (Microsoft)</li>
<li>Benjamin Young (Wiley)</li>
<li>Bill Kasdorf (BISG)</li>
<li>Brady Duga (Google)</li>
<li>Carlos Araya</li>
<li>Charles LaPierre (Benetech)</li>
<li>Daniel Glazman (Disruptive Innovations)</li>
<li>Daniel Weck (DAISY Consortium)</li>
<li>David Herron</li>
<li>Deborah Kaplan</li>
<li>Evan Owens (Cenveo Publisher Services)</li>
<li>Franco Alvarado</li>
<li>Garth Conboy (Google)</li>
<li>Georg Stadler</li>
<li>George Kersher (DAISY Consortium)</li>
<li>Greg Alchin</li>
<li>Hadrien Gardeur (Feedbooks)</li>
<li>Iris Febres</li>
<li>Ivan Herman (W3C)</li>
<li>James Briano</li>
<li>Jeff Buehler</li>
<li>Johan van der Knijff</li>
<li>John Costa (Repub Interactive Technologies LLC)</li>
<li>Julian Calderazi (DigitalBe)</li>
<li>Ken Jones (Circular Software)</li>
<li>Krzysztof Zemczak</li>
<li>Laura Brady</li>
<li>Laurent Le Meur (EDRLab)</li>
<li>Léonie Watson (Paciello Group)</li>
<li>Lloyd Rasmussen (Library of Congress)</li>
<li>Luc Audrain (Hachette Livre)</li>
<li>Makoto Murata (Keio Advanced Publishing Laboratory)</li>
<li>Martin Kraetke (le-tex publishing services GmbH)</li>
<li>Mateus Manço Teixeira (W. W. Norton)</li>
<li>Matt Curtis</li>
<li>Matt Garrish (DAISY Consortium)</li>
<li>Mike Baker (Houghton Mifflin Harcourt)</li>
<li>Mustapha Lazrek (Microsoft)</li>
<li>N. Erhan Uzumcu</li>
<li>Naomi Kennedy (Penguin Random House)</li>
<li>Nick Ruffilo (VitalSource)</li>
<li>Olaf Hoffmann</li>
<li>Peter Krautzberger (krautzource UG)</li>
<li>Rachel Comerford (Macmillan Higher Education)</li>
<li>Ric Wright</li>
<li>Rick Johnson (VitalSource)</li>
<li>Romain Deltour (DAISY Consortium)</li>
<li>Ruth Tait</li>
<li>Theresa O’Connor (Apple)</li>
<li>Tobias Fischer</li>
<li>Toshiaki Koike (Voyager Japan Inc.)</li>
<li>Tzviya Siegman (Wiley)</li>
<li>Wolfgang Schindler (PONS GmbH)</li>
<li>Zheng (Jeff) Xu (Rakuten Inc.)</li>
</ul>

<p>International Digital Publishing Forum の前メンバー、特に Markus Gylling と Bill McCoy に感謝する。彼らなしでは EPUB は実現しなかったであろう。</p>
</section>

	

<section id="references" class="appendix">
<!--OddPage-->
<h2 id="e-references"><span class="secno">E. </span>参照・参考<a class="self-link" aria-label="§" href="#references"></a></h2>
      
<section id="normative-references">
<h3 id="e-1-normative-references"><span class="secno">E.1 </span>規定の参照<a class="self-link" aria-label="§" href="#normative-references"></a></h3>
<dl class="bibliography">
<dt id="bib-csssnapshot">[CSSSnapshot]</dt>
<dd><a href="https://www.w3.org/TR/CSS/"><cite>CSS Snapshot</cite></a>. URL: <a href="https://www.w3.org/TR/CSS/">https://www.w3.org/TR/CSS/</a></dd><dt id="bib-epub32">[EPUB32]</dt>
<dd><a href="epub-spec.html"><cite>EPUB 3.2</cite></a>. URL: <a href="epub-spec.html">epub-spec.html</a></dd><dt id="bib-fips-180-4">[FIPS-180-4]</dt>
<dd><a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf"><cite>FIPS PUB 180-4 Secure Hash Standard</cite></a>.  U.S. Department of Commerce/National Institute of Standards and Technology. URL: <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf">https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf</a></dd><dt id="bib-relaxng-schema">[RelaxNG-Schema]</dt>
<dd><a href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c052348_ISO_IEC_19757-2_2008(E).zip"><cite>Information technology -- Document Schema Definition Language (DSDL) -- Part 2: Regular-grammar-based validation -- RELAX NG</cite></a>.  ISO/IEC. 2008. URL: <a href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c052348_ISO_IEC_19757-2_2008(E).zip">http://standards.iso.org/ittf/PubliclyAvailableStandards/c052348_ISO_IEC_19757-2_2008(E).zip</a></dd><dt id="bib-rfc2046">[RFC2046]</dt>
<dd><a href="https://tools.ietf.org/html/rfc2046"><cite>Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</cite></a>. N. Freed; N. Borenstein. IETF. November 1996. Draft Standard. URL: <a href="https://tools.ietf.org/html/rfc2046">https://tools.ietf.org/html/rfc2046</a></dd><dt id="bib-rfc2119">[RFC2119]</dt>
<dd><a href="https://tools.ietf.org/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a></dd><dt id="bib-rfc3986">[RFC3986]</dt>
<dd><a href="https://tools.ietf.org/html/rfc3986"><cite>Uniform Resource Identifier (URI): Generic Syntax</cite></a>. T. Berners-Lee; R. Fielding; L. Masinter. IETF. January 2005. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc3986">https://tools.ietf.org/html/rfc3986</a></dd><dt id="bib-rfc3987">[RFC3987]</dt>
<dd><a href="https://tools.ietf.org/html/rfc3987"><cite>Internationalized Resource Identifiers (IRIs)</cite></a>. M. Duerst; M. Suignard. IETF. January 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc3987">https://tools.ietf.org/html/rfc3987</a></dd><dt id="bib-tr15">[TR15]</dt>
<dd><a href="http://www.unicode.org/reports/tr15/"><cite>Unicode Normalization Forms</cite></a>. URL: <a href="http://www.unicode.org/reports/tr15/">http://www.unicode.org/reports/tr15/</a></dd><dt id="bib-unicode">[Unicode]</dt>
<dd><a href="https://www.unicode.org/versions/latest/"><cite>The Unicode Standard</cite></a>.  Unicode Consortium. URL: <a href="https://www.unicode.org/versions/latest/">https://www.unicode.org/versions/latest/</a></dd><dt id="bib-us-ascii">[US-ASCII]</dt>
<dd><cite>"Coded Character Set - 7-bit American Standard Code for Information Interchange", ANSI X3.4, 1986.</cite>. </dd><dt id="bib-xml">[XML]</dt>
<dd><a href="https://www.w3.org/TR/xml/"><cite>Extensible Markup Language (XML) 1.0 (Fifth Edition)</cite></a>. Tim Bray; Jean Paoli; Michael Sperberg-McQueen; Eve Maler; François Yergeau et al. W3C. 26 November 2008. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xml/">https://www.w3.org/TR/xml/</a></dd><dt id="bib-xml-names">[XML-NAMES]</dt>
<dd><a href="https://www.w3.org/TR/xml-names/"><cite>Namespaces in XML 1.0 (Third Edition)</cite></a>. Tim Bray; Dave Hollander; Andrew Layman; Richard Tobin; Henry Thompson et al. W3C. 8 December 2009. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xml-names/">https://www.w3.org/TR/xml-names/</a></dd><dt id="bib-xmldsig-core1">[XMLDSIG-CORE1]</dt>
<dd><a href="https://www.w3.org/TR/xmldsig-core1/"><cite>XML Signature Syntax and Processing Version 1.1</cite></a>. Donald Eastlake; Joseph Reagle; David Solo; Frederick Hirsch; Magnus Nyström; Thomas Roessler; Kelvin Yiu. W3C. 11 April 2013. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xmldsig-core1/">https://www.w3.org/TR/xmldsig-core1/</a></dd><dt id="bib-xmlenc-core1">[XMLENC-CORE1]</dt>
<dd><a href="https://www.w3.org/TR/xmlenc-core1/"><cite>XML Encryption Syntax and Processing Version 1.1</cite></a>. Donald Eastlake; Joseph Reagle; Frederick Hirsch; Thomas Roessler. W3C. 11 April 2013. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xmlenc-core1/">https://www.w3.org/TR/xmlenc-core1/</a></dd><dt id="bib-xmlenc-decrypt">[XMLENC-DECRYPT]</dt>
<dd><a href="https://www.w3.org/TR/xmlenc-decrypt/"><cite>Decryption Transform for XML Signature</cite></a>. Merlin Hughes; Takeshi Imamura; Hiroshi Maruyama. W3C. 10 December 2002. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xmlenc-decrypt/">https://www.w3.org/TR/xmlenc-decrypt/</a></dd><dt id="bib-xmlschema-2">[XMLSCHEMA-2]</dt>
<dd><a href="https://www.w3.org/TR/xmlschema-2/"><cite>XML Schema Part 2: Datatypes Second Edition</cite></a>. Paul V. Biron; Ashok Malhotra. W3C. 28 October 2004. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xmlschema-2/">https://www.w3.org/TR/xmlschema-2/</a></dd><dt id="bib-xmlsec-rngschema-20130411">[XMLSEC-RNGSCHEMA-20130411]</dt>
<dd><a href="https://www.w3.org/TR/2013/NOTE-xmlsec-rngschema-20130411/"><cite>XML Security RELAX NG Schemas</cite></a>. Murata Makoto; Frederick Hirsch. W3C. 11 April 2013. W3C Note. URL: <a href="https://www.w3.org/TR/2013/NOTE-xmlsec-rngschema-20130411/">https://www.w3.org/TR/2013/NOTE-xmlsec-rngschema-20130411/</a></dd><dt id="bib-zip">[ZIP]</dt>
<dd><a href="https://www.pkware.com/documents/casestudies/APPNOTE.TXT"><cite>.ZIP File Format Specification</cite></a>. 1 September 2012. Final. URL: <a href="https://www.pkware.com/documents/casestudies/APPNOTE.TXT">https://www.pkware.com/documents/casestudies/APPNOTE.TXT</a></dd>
</dl>
</section>
<section id="informative-references">
<h3 id="e-2-informative-references"><span class="secno">E.2 </span>規定ではない参照<a class="self-link" aria-label="§" href="#informative-references"></a></h3>
<dl class="bibliography">
<dt id="bib-epub32changes">[EPUB32Changes]</dt>
<dd><a href="epub-changes.html"><cite>EPUB 3.2 Changes</cite></a>. URL: <a href="epub-changes.html">epub-changes.html</a></dd><dt id="bib-html">[HTML]</dt>
<dd><a href="https://www.w3.org/TR/html/"><cite>HTML</cite></a>.  W3C. W3C Recommendation. URL: <a href="https://www.w3.org/TR/html/">https://www.w3.org/TR/html/</a></dd><dt id="bib-odf">[ODF]</dt>
<dd><a href="https://www.oasis-open.org/committees/download.php/12572/OpenDocument-v1.0-os.pdf"><cite>Open Document Format for Office Applications (OpenDocument) v1.0</cite></a>. 1 May 2005. URL: <a href="https://www.oasis-open.org/committees/download.php/12572/OpenDocument-v1.0-os.pdf">https://www.oasis-open.org/committees/download.php/12572/OpenDocument-v1.0-os.pdf</a></dd><dt id="bib-rfc">[RFC]</dt>
<dd><a href="https://www.ietf.org/standards/rfcs/"><cite>Request for Comments</cite></a>. URL: <a href="https://www.ietf.org/standards/rfcs/">https://www.ietf.org/standards/rfcs/</a></dd>
</dl>
</section>
</section>
<p role="navigation" id="back-to-top"><a href="#title"><abbr title="Back to Top">↑</abbr></a></p><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
</body>
</html>
